(function(){const K=document.createElement("link").relList;if(K&&K.supports&&K.supports("modulepreload"))return;for(const p of document.querySelectorAll('link[rel="modulepreload"]'))z(p);new MutationObserver(p=>{for(const a of p)if(a.type==="childList")for(const i of a.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&z(i)}).observe(document,{childList:!0,subtree:!0});function h(p){const a={};return p.integrity&&(a.integrity=p.integrity),p.referrerPolicy&&(a.referrerPolicy=p.referrerPolicy),p.crossOrigin==="use-credentials"?a.credentials="include":p.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function z(p){if(p.ep)return;p.ep=!0;const a=h(p);fetch(p.href,a)}})();var Lt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function ke(T){return T&&T.__esModule&&Object.prototype.hasOwnProperty.call(T,"default")?T.default:T}function Dt(T){throw new Error('Could not dynamically require "'+T+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var ie={exports:{}};/*!

JSZip v3.10.1 - A JavaScript class for generating and reading zip files
<http://stuartk.com/jszip>

(c) 2009-2016 Stuart Knightley <stuart [at] stuartk.com>
Dual licenced under the MIT license or GPLv3. See https://raw.github.com/Stuk/jszip/main/LICENSE.markdown.

JSZip uses the library pako released under the MIT license :
https://github.com/nodeca/pako/blob/main/LICENSE
*/(function(T,K){(function(h){T.exports=h()})(function(){return function h(z,p,a){function i(_,v){if(!p[_]){if(!z[_]){var g=typeof Dt=="function"&&Dt;if(!v&&g)return g(_,!0);if(r)return r(_,!0);var b=new Error("Cannot find module '"+_+"'");throw b.code="MODULE_NOT_FOUND",b}var s=p[_]={exports:{}};z[_][0].call(s.exports,function(f){var n=z[_][1][f];return i(n||f)},s,s.exports,h,z,p,a)}return p[_].exports}for(var r=typeof Dt=="function"&&Dt,o=0;o<a.length;o++)i(a[o]);return i}({1:[function(h,z,p){var a=h("./utils"),i=h("./support"),r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";p.encode=function(o){for(var _,v,g,b,s,f,n,u=[],l=0,m=o.length,w=m,E=a.getTypeOf(o)!=="string";l<o.length;)w=m-l,g=E?(_=o[l++],v=l<m?o[l++]:0,l<m?o[l++]:0):(_=o.charCodeAt(l++),v=l<m?o.charCodeAt(l++):0,l<m?o.charCodeAt(l++):0),b=_>>2,s=(3&_)<<4|v>>4,f=1<w?(15&v)<<2|g>>6:64,n=2<w?63&g:64,u.push(r.charAt(b)+r.charAt(s)+r.charAt(f)+r.charAt(n));return u.join("")},p.decode=function(o){var _,v,g,b,s,f,n=0,u=0,l="data:";if(o.substr(0,l.length)===l)throw new Error("Invalid base64 input, it looks like a data url.");var m,w=3*(o=o.replace(/[^A-Za-z0-9+/=]/g,"")).length/4;if(o.charAt(o.length-1)===r.charAt(64)&&w--,o.charAt(o.length-2)===r.charAt(64)&&w--,w%1!=0)throw new Error("Invalid base64 input, bad content length.");for(m=i.uint8array?new Uint8Array(0|w):new Array(0|w);n<o.length;)_=r.indexOf(o.charAt(n++))<<2|(b=r.indexOf(o.charAt(n++)))>>4,v=(15&b)<<4|(s=r.indexOf(o.charAt(n++)))>>2,g=(3&s)<<6|(f=r.indexOf(o.charAt(n++))),m[u++]=_,s!==64&&(m[u++]=v),f!==64&&(m[u++]=g);return m}},{"./support":30,"./utils":32}],2:[function(h,z,p){var a=h("./external"),i=h("./stream/DataWorker"),r=h("./stream/Crc32Probe"),o=h("./stream/DataLengthProbe");function _(v,g,b,s,f){this.compressedSize=v,this.uncompressedSize=g,this.crc32=b,this.compression=s,this.compressedContent=f}_.prototype={getContentWorker:function(){var v=new i(a.Promise.resolve(this.compressedContent)).pipe(this.compression.uncompressWorker()).pipe(new o("data_length")),g=this;return v.on("end",function(){if(this.streamInfo.data_length!==g.uncompressedSize)throw new Error("Bug : uncompressed data size mismatch")}),v},getCompressedWorker:function(){return new i(a.Promise.resolve(this.compressedContent)).withStreamInfo("compressedSize",this.compressedSize).withStreamInfo("uncompressedSize",this.uncompressedSize).withStreamInfo("crc32",this.crc32).withStreamInfo("compression",this.compression)}},_.createWorkerFrom=function(v,g,b){return v.pipe(new r).pipe(new o("uncompressedSize")).pipe(g.compressWorker(b)).pipe(new o("compressedSize")).withStreamInfo("compression",g)},z.exports=_},{"./external":6,"./stream/Crc32Probe":25,"./stream/DataLengthProbe":26,"./stream/DataWorker":27}],3:[function(h,z,p){var a=h("./stream/GenericWorker");p.STORE={magic:"\0\0",compressWorker:function(){return new a("STORE compression")},uncompressWorker:function(){return new a("STORE decompression")}},p.DEFLATE=h("./flate")},{"./flate":7,"./stream/GenericWorker":28}],4:[function(h,z,p){var a=h("./utils"),i=function(){for(var r,o=[],_=0;_<256;_++){r=_;for(var v=0;v<8;v++)r=1&r?3988292384^r>>>1:r>>>1;o[_]=r}return o}();z.exports=function(r,o){return r!==void 0&&r.length?a.getTypeOf(r)!=="string"?function(_,v,g,b){var s=i,f=b+g;_^=-1;for(var n=b;n<f;n++)_=_>>>8^s[255&(_^v[n])];return-1^_}(0|o,r,r.length,0):function(_,v,g,b){var s=i,f=b+g;_^=-1;for(var n=b;n<f;n++)_=_>>>8^s[255&(_^v.charCodeAt(n))];return-1^_}(0|o,r,r.length,0):0}},{"./utils":32}],5:[function(h,z,p){p.base64=!1,p.binary=!1,p.dir=!1,p.createFolders=!0,p.date=null,p.compression=null,p.compressionOptions=null,p.comment=null,p.unixPermissions=null,p.dosPermissions=null},{}],6:[function(h,z,p){var a=null;a=typeof Promise<"u"?Promise:h("lie"),z.exports={Promise:a}},{lie:37}],7:[function(h,z,p){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Uint32Array<"u",i=h("pako"),r=h("./utils"),o=h("./stream/GenericWorker"),_=a?"uint8array":"array";function v(g,b){o.call(this,"FlateWorker/"+g),this._pako=null,this._pakoAction=g,this._pakoOptions=b,this.meta={}}p.magic="\b\0",r.inherits(v,o),v.prototype.processChunk=function(g){this.meta=g.meta,this._pako===null&&this._createPako(),this._pako.push(r.transformTo(_,g.data),!1)},v.prototype.flush=function(){o.prototype.flush.call(this),this._pako===null&&this._createPako(),this._pako.push([],!0)},v.prototype.cleanUp=function(){o.prototype.cleanUp.call(this),this._pako=null},v.prototype._createPako=function(){this._pako=new i[this._pakoAction]({raw:!0,level:this._pakoOptions.level||-1});var g=this;this._pako.onData=function(b){g.push({data:b,meta:g.meta})}},p.compressWorker=function(g){return new v("Deflate",g)},p.uncompressWorker=function(){return new v("Inflate",{})}},{"./stream/GenericWorker":28,"./utils":32,pako:38}],8:[function(h,z,p){function a(s,f){var n,u="";for(n=0;n<f;n++)u+=String.fromCharCode(255&s),s>>>=8;return u}function i(s,f,n,u,l,m){var w,E,x=s.file,P=s.compression,O=m!==_.utf8encode,j=r.transformTo("string",m(x.name)),B=r.transformTo("string",_.utf8encode(x.name)),Z=x.comment,V=r.transformTo("string",m(Z)),y=r.transformTo("string",_.utf8encode(Z)),R=B.length!==x.name.length,e=y.length!==Z.length,D="",Q="",U="",tt=x.dir,M=x.date,J={crc32:0,compressedSize:0,uncompressedSize:0};f&&!n||(J.crc32=s.crc32,J.compressedSize=s.compressedSize,J.uncompressedSize=s.uncompressedSize);var A=0;f&&(A|=8),O||!R&&!e||(A|=2048);var C=0,X=0;tt&&(C|=16),l==="UNIX"?(X=798,C|=function(H,st){var ut=H;return H||(ut=st?16893:33204),(65535&ut)<<16}(x.unixPermissions,tt)):(X=20,C|=function(H){return 63&(H||0)}(x.dosPermissions)),w=M.getUTCHours(),w<<=6,w|=M.getUTCMinutes(),w<<=5,w|=M.getUTCSeconds()/2,E=M.getUTCFullYear()-1980,E<<=4,E|=M.getUTCMonth()+1,E<<=5,E|=M.getUTCDate(),R&&(Q=a(1,1)+a(v(j),4)+B,D+="up"+a(Q.length,2)+Q),e&&(U=a(1,1)+a(v(V),4)+y,D+="uc"+a(U.length,2)+U);var $="";return $+=`
\0`,$+=a(A,2),$+=P.magic,$+=a(w,2),$+=a(E,2),$+=a(J.crc32,4),$+=a(J.compressedSize,4),$+=a(J.uncompressedSize,4),$+=a(j.length,2),$+=a(D.length,2),{fileRecord:g.LOCAL_FILE_HEADER+$+j+D,dirRecord:g.CENTRAL_FILE_HEADER+a(X,2)+$+a(V.length,2)+"\0\0\0\0"+a(C,4)+a(u,4)+j+D+V}}var r=h("../utils"),o=h("../stream/GenericWorker"),_=h("../utf8"),v=h("../crc32"),g=h("../signature");function b(s,f,n,u){o.call(this,"ZipFileWorker"),this.bytesWritten=0,this.zipComment=f,this.zipPlatform=n,this.encodeFileName=u,this.streamFiles=s,this.accumulate=!1,this.contentBuffer=[],this.dirRecords=[],this.currentSourceOffset=0,this.entriesCount=0,this.currentFile=null,this._sources=[]}r.inherits(b,o),b.prototype.push=function(s){var f=s.meta.percent||0,n=this.entriesCount,u=this._sources.length;this.accumulate?this.contentBuffer.push(s):(this.bytesWritten+=s.data.length,o.prototype.push.call(this,{data:s.data,meta:{currentFile:this.currentFile,percent:n?(f+100*(n-u-1))/n:100}}))},b.prototype.openedSource=function(s){this.currentSourceOffset=this.bytesWritten,this.currentFile=s.file.name;var f=this.streamFiles&&!s.file.dir;if(f){var n=i(s,f,!1,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);this.push({data:n.fileRecord,meta:{percent:0}})}else this.accumulate=!0},b.prototype.closedSource=function(s){this.accumulate=!1;var f=this.streamFiles&&!s.file.dir,n=i(s,f,!0,this.currentSourceOffset,this.zipPlatform,this.encodeFileName);if(this.dirRecords.push(n.dirRecord),f)this.push({data:function(u){return g.DATA_DESCRIPTOR+a(u.crc32,4)+a(u.compressedSize,4)+a(u.uncompressedSize,4)}(s),meta:{percent:100}});else for(this.push({data:n.fileRecord,meta:{percent:0}});this.contentBuffer.length;)this.push(this.contentBuffer.shift());this.currentFile=null},b.prototype.flush=function(){for(var s=this.bytesWritten,f=0;f<this.dirRecords.length;f++)this.push({data:this.dirRecords[f],meta:{percent:100}});var n=this.bytesWritten-s,u=function(l,m,w,E,x){var P=r.transformTo("string",x(E));return g.CENTRAL_DIRECTORY_END+"\0\0\0\0"+a(l,2)+a(l,2)+a(m,4)+a(w,4)+a(P.length,2)+P}(this.dirRecords.length,n,s,this.zipComment,this.encodeFileName);this.push({data:u,meta:{percent:100}})},b.prototype.prepareNextSource=function(){this.previous=this._sources.shift(),this.openedSource(this.previous.streamInfo),this.isPaused?this.previous.pause():this.previous.resume()},b.prototype.registerPrevious=function(s){this._sources.push(s);var f=this;return s.on("data",function(n){f.processChunk(n)}),s.on("end",function(){f.closedSource(f.previous.streamInfo),f._sources.length?f.prepareNextSource():f.end()}),s.on("error",function(n){f.error(n)}),this},b.prototype.resume=function(){return!!o.prototype.resume.call(this)&&(!this.previous&&this._sources.length?(this.prepareNextSource(),!0):this.previous||this._sources.length||this.generatedError?void 0:(this.end(),!0))},b.prototype.error=function(s){var f=this._sources;if(!o.prototype.error.call(this,s))return!1;for(var n=0;n<f.length;n++)try{f[n].error(s)}catch{}return!0},b.prototype.lock=function(){o.prototype.lock.call(this);for(var s=this._sources,f=0;f<s.length;f++)s[f].lock()},z.exports=b},{"../crc32":4,"../signature":23,"../stream/GenericWorker":28,"../utf8":31,"../utils":32}],9:[function(h,z,p){var a=h("../compressions"),i=h("./ZipFileWorker");p.generateWorker=function(r,o,_){var v=new i(o.streamFiles,_,o.platform,o.encodeFileName),g=0;try{r.forEach(function(b,s){g++;var f=function(m,w){var E=m||w,x=a[E];if(!x)throw new Error(E+" is not a valid compression method !");return x}(s.options.compression,o.compression),n=s.options.compressionOptions||o.compressionOptions||{},u=s.dir,l=s.date;s._compressWorker(f,n).withStreamInfo("file",{name:b,dir:u,date:l,comment:s.comment||"",unixPermissions:s.unixPermissions,dosPermissions:s.dosPermissions}).pipe(v)}),v.entriesCount=g}catch(b){v.error(b)}return v}},{"../compressions":3,"./ZipFileWorker":8}],10:[function(h,z,p){function a(){if(!(this instanceof a))return new a;if(arguments.length)throw new Error("The constructor with parameters has been removed in JSZip 3.0, please check the upgrade guide.");this.files=Object.create(null),this.comment=null,this.root="",this.clone=function(){var i=new a;for(var r in this)typeof this[r]!="function"&&(i[r]=this[r]);return i}}(a.prototype=h("./object")).loadAsync=h("./load"),a.support=h("./support"),a.defaults=h("./defaults"),a.version="3.10.1",a.loadAsync=function(i,r){return new a().loadAsync(i,r)},a.external=h("./external"),z.exports=a},{"./defaults":5,"./external":6,"./load":11,"./object":15,"./support":30}],11:[function(h,z,p){var a=h("./utils"),i=h("./external"),r=h("./utf8"),o=h("./zipEntries"),_=h("./stream/Crc32Probe"),v=h("./nodejsUtils");function g(b){return new i.Promise(function(s,f){var n=b.decompressed.getContentWorker().pipe(new _);n.on("error",function(u){f(u)}).on("end",function(){n.streamInfo.crc32!==b.decompressed.crc32?f(new Error("Corrupted zip : CRC32 mismatch")):s()}).resume()})}z.exports=function(b,s){var f=this;return s=a.extend(s||{},{base64:!1,checkCRC32:!1,optimizedBinaryString:!1,createFolders:!1,decodeFileName:r.utf8decode}),v.isNode&&v.isStream(b)?i.Promise.reject(new Error("JSZip can't accept a stream when loading a zip file.")):a.prepareContent("the loaded zip file",b,!0,s.optimizedBinaryString,s.base64).then(function(n){var u=new o(s);return u.load(n),u}).then(function(n){var u=[i.Promise.resolve(n)],l=n.files;if(s.checkCRC32)for(var m=0;m<l.length;m++)u.push(g(l[m]));return i.Promise.all(u)}).then(function(n){for(var u=n.shift(),l=u.files,m=0;m<l.length;m++){var w=l[m],E=w.fileNameStr,x=a.resolve(w.fileNameStr);f.file(x,w.decompressed,{binary:!0,optimizedBinaryString:!0,date:w.date,dir:w.dir,comment:w.fileCommentStr.length?w.fileCommentStr:null,unixPermissions:w.unixPermissions,dosPermissions:w.dosPermissions,createFolders:s.createFolders}),w.dir||(f.file(x).unsafeOriginalName=E)}return u.zipComment.length&&(f.comment=u.zipComment),f})}},{"./external":6,"./nodejsUtils":14,"./stream/Crc32Probe":25,"./utf8":31,"./utils":32,"./zipEntries":33}],12:[function(h,z,p){var a=h("../utils"),i=h("../stream/GenericWorker");function r(o,_){i.call(this,"Nodejs stream input adapter for "+o),this._upstreamEnded=!1,this._bindStream(_)}a.inherits(r,i),r.prototype._bindStream=function(o){var _=this;(this._stream=o).pause(),o.on("data",function(v){_.push({data:v,meta:{percent:0}})}).on("error",function(v){_.isPaused?this.generatedError=v:_.error(v)}).on("end",function(){_.isPaused?_._upstreamEnded=!0:_.end()})},r.prototype.pause=function(){return!!i.prototype.pause.call(this)&&(this._stream.pause(),!0)},r.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(this._upstreamEnded?this.end():this._stream.resume(),!0)},z.exports=r},{"../stream/GenericWorker":28,"../utils":32}],13:[function(h,z,p){var a=h("readable-stream").Readable;function i(r,o,_){a.call(this,o),this._helper=r;var v=this;r.on("data",function(g,b){v.push(g)||v._helper.pause(),_&&_(b)}).on("error",function(g){v.emit("error",g)}).on("end",function(){v.push(null)})}h("../utils").inherits(i,a),i.prototype._read=function(){this._helper.resume()},z.exports=i},{"../utils":32,"readable-stream":16}],14:[function(h,z,p){z.exports={isNode:typeof Buffer<"u",newBufferFrom:function(a,i){if(Buffer.from&&Buffer.from!==Uint8Array.from)return Buffer.from(a,i);if(typeof a=="number")throw new Error('The "data" argument must not be a number');return new Buffer(a,i)},allocBuffer:function(a){if(Buffer.alloc)return Buffer.alloc(a);var i=new Buffer(a);return i.fill(0),i},isBuffer:function(a){return Buffer.isBuffer(a)},isStream:function(a){return a&&typeof a.on=="function"&&typeof a.pause=="function"&&typeof a.resume=="function"}}},{}],15:[function(h,z,p){function a(x,P,O){var j,B=r.getTypeOf(P),Z=r.extend(O||{},v);Z.date=Z.date||new Date,Z.compression!==null&&(Z.compression=Z.compression.toUpperCase()),typeof Z.unixPermissions=="string"&&(Z.unixPermissions=parseInt(Z.unixPermissions,8)),Z.unixPermissions&&16384&Z.unixPermissions&&(Z.dir=!0),Z.dosPermissions&&16&Z.dosPermissions&&(Z.dir=!0),Z.dir&&(x=l(x)),Z.createFolders&&(j=u(x))&&m.call(this,j,!0);var V=B==="string"&&Z.binary===!1&&Z.base64===!1;O&&O.binary!==void 0||(Z.binary=!V),(P instanceof g&&P.uncompressedSize===0||Z.dir||!P||P.length===0)&&(Z.base64=!1,Z.binary=!0,P="",Z.compression="STORE",B="string");var y=null;y=P instanceof g||P instanceof o?P:f.isNode&&f.isStream(P)?new n(x,P):r.prepareContent(x,P,Z.binary,Z.optimizedBinaryString,Z.base64);var R=new b(x,y,Z);this.files[x]=R}var i=h("./utf8"),r=h("./utils"),o=h("./stream/GenericWorker"),_=h("./stream/StreamHelper"),v=h("./defaults"),g=h("./compressedObject"),b=h("./zipObject"),s=h("./generate"),f=h("./nodejsUtils"),n=h("./nodejs/NodejsStreamInputAdapter"),u=function(x){x.slice(-1)==="/"&&(x=x.substring(0,x.length-1));var P=x.lastIndexOf("/");return 0<P?x.substring(0,P):""},l=function(x){return x.slice(-1)!=="/"&&(x+="/"),x},m=function(x,P){return P=P!==void 0?P:v.createFolders,x=l(x),this.files[x]||a.call(this,x,null,{dir:!0,createFolders:P}),this.files[x]};function w(x){return Object.prototype.toString.call(x)==="[object RegExp]"}var E={load:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},forEach:function(x){var P,O,j;for(P in this.files)j=this.files[P],(O=P.slice(this.root.length,P.length))&&P.slice(0,this.root.length)===this.root&&x(O,j)},filter:function(x){var P=[];return this.forEach(function(O,j){x(O,j)&&P.push(j)}),P},file:function(x,P,O){if(arguments.length!==1)return x=this.root+x,a.call(this,x,P,O),this;if(w(x)){var j=x;return this.filter(function(Z,V){return!V.dir&&j.test(Z)})}var B=this.files[this.root+x];return B&&!B.dir?B:null},folder:function(x){if(!x)return this;if(w(x))return this.filter(function(B,Z){return Z.dir&&x.test(B)});var P=this.root+x,O=m.call(this,P),j=this.clone();return j.root=O.name,j},remove:function(x){x=this.root+x;var P=this.files[x];if(P||(x.slice(-1)!=="/"&&(x+="/"),P=this.files[x]),P&&!P.dir)delete this.files[x];else for(var O=this.filter(function(B,Z){return Z.name.slice(0,x.length)===x}),j=0;j<O.length;j++)delete this.files[O[j].name];return this},generate:function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},generateInternalStream:function(x){var P,O={};try{if((O=r.extend(x||{},{streamFiles:!1,compression:"STORE",compressionOptions:null,type:"",platform:"DOS",comment:null,mimeType:"application/zip",encodeFileName:i.utf8encode})).type=O.type.toLowerCase(),O.compression=O.compression.toUpperCase(),O.type==="binarystring"&&(O.type="string"),!O.type)throw new Error("No output type specified.");r.checkSupport(O.type),O.platform!=="darwin"&&O.platform!=="freebsd"&&O.platform!=="linux"&&O.platform!=="sunos"||(O.platform="UNIX"),O.platform==="win32"&&(O.platform="DOS");var j=O.comment||this.comment||"";P=s.generateWorker(this,O,j)}catch(B){(P=new o("error")).error(B)}return new _(P,O.type||"string",O.mimeType)},generateAsync:function(x,P){return this.generateInternalStream(x).accumulate(P)},generateNodeStream:function(x,P){return(x=x||{}).type||(x.type="nodebuffer"),this.generateInternalStream(x).toNodejsStream(P)}};z.exports=E},{"./compressedObject":2,"./defaults":5,"./generate":9,"./nodejs/NodejsStreamInputAdapter":12,"./nodejsUtils":14,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31,"./utils":32,"./zipObject":35}],16:[function(h,z,p){z.exports=h("stream")},{stream:void 0}],17:[function(h,z,p){var a=h("./DataReader");function i(r){a.call(this,r);for(var o=0;o<this.data.length;o++)r[o]=255&r[o]}h("../utils").inherits(i,a),i.prototype.byteAt=function(r){return this.data[this.zero+r]},i.prototype.lastIndexOfSignature=function(r){for(var o=r.charCodeAt(0),_=r.charCodeAt(1),v=r.charCodeAt(2),g=r.charCodeAt(3),b=this.length-4;0<=b;--b)if(this.data[b]===o&&this.data[b+1]===_&&this.data[b+2]===v&&this.data[b+3]===g)return b-this.zero;return-1},i.prototype.readAndCheckSignature=function(r){var o=r.charCodeAt(0),_=r.charCodeAt(1),v=r.charCodeAt(2),g=r.charCodeAt(3),b=this.readData(4);return o===b[0]&&_===b[1]&&v===b[2]&&g===b[3]},i.prototype.readData=function(r){if(this.checkOffset(r),r===0)return[];var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},z.exports=i},{"../utils":32,"./DataReader":18}],18:[function(h,z,p){var a=h("../utils");function i(r){this.data=r,this.length=r.length,this.index=0,this.zero=0}i.prototype={checkOffset:function(r){this.checkIndex(this.index+r)},checkIndex:function(r){if(this.length<this.zero+r||r<0)throw new Error("End of data reached (data length = "+this.length+", asked index = "+r+"). Corrupted zip ?")},setIndex:function(r){this.checkIndex(r),this.index=r},skip:function(r){this.setIndex(this.index+r)},byteAt:function(){},readInt:function(r){var o,_=0;for(this.checkOffset(r),o=this.index+r-1;o>=this.index;o--)_=(_<<8)+this.byteAt(o);return this.index+=r,_},readString:function(r){return a.transformTo("string",this.readData(r))},readData:function(){},lastIndexOfSignature:function(){},readAndCheckSignature:function(){},readDate:function(){var r=this.readInt(4);return new Date(Date.UTC(1980+(r>>25&127),(r>>21&15)-1,r>>16&31,r>>11&31,r>>5&63,(31&r)<<1))}},z.exports=i},{"../utils":32}],19:[function(h,z,p){var a=h("./Uint8ArrayReader");function i(r){a.call(this,r)}h("../utils").inherits(i,a),i.prototype.readData=function(r){this.checkOffset(r);var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},z.exports=i},{"../utils":32,"./Uint8ArrayReader":21}],20:[function(h,z,p){var a=h("./DataReader");function i(r){a.call(this,r)}h("../utils").inherits(i,a),i.prototype.byteAt=function(r){return this.data.charCodeAt(this.zero+r)},i.prototype.lastIndexOfSignature=function(r){return this.data.lastIndexOf(r)-this.zero},i.prototype.readAndCheckSignature=function(r){return r===this.readData(4)},i.prototype.readData=function(r){this.checkOffset(r);var o=this.data.slice(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},z.exports=i},{"../utils":32,"./DataReader":18}],21:[function(h,z,p){var a=h("./ArrayReader");function i(r){a.call(this,r)}h("../utils").inherits(i,a),i.prototype.readData=function(r){if(this.checkOffset(r),r===0)return new Uint8Array(0);var o=this.data.subarray(this.zero+this.index,this.zero+this.index+r);return this.index+=r,o},z.exports=i},{"../utils":32,"./ArrayReader":17}],22:[function(h,z,p){var a=h("../utils"),i=h("../support"),r=h("./ArrayReader"),o=h("./StringReader"),_=h("./NodeBufferReader"),v=h("./Uint8ArrayReader");z.exports=function(g){var b=a.getTypeOf(g);return a.checkSupport(b),b!=="string"||i.uint8array?b==="nodebuffer"?new _(g):i.uint8array?new v(a.transformTo("uint8array",g)):new r(a.transformTo("array",g)):new o(g)}},{"../support":30,"../utils":32,"./ArrayReader":17,"./NodeBufferReader":19,"./StringReader":20,"./Uint8ArrayReader":21}],23:[function(h,z,p){p.LOCAL_FILE_HEADER="PK",p.CENTRAL_FILE_HEADER="PK",p.CENTRAL_DIRECTORY_END="PK",p.ZIP64_CENTRAL_DIRECTORY_LOCATOR="PK\x07",p.ZIP64_CENTRAL_DIRECTORY_END="PK",p.DATA_DESCRIPTOR="PK\x07\b"},{}],24:[function(h,z,p){var a=h("./GenericWorker"),i=h("../utils");function r(o){a.call(this,"ConvertWorker to "+o),this.destType=o}i.inherits(r,a),r.prototype.processChunk=function(o){this.push({data:i.transformTo(this.destType,o.data),meta:o.meta})},z.exports=r},{"../utils":32,"./GenericWorker":28}],25:[function(h,z,p){var a=h("./GenericWorker"),i=h("../crc32");function r(){a.call(this,"Crc32Probe"),this.withStreamInfo("crc32",0)}h("../utils").inherits(r,a),r.prototype.processChunk=function(o){this.streamInfo.crc32=i(o.data,this.streamInfo.crc32||0),this.push(o)},z.exports=r},{"../crc32":4,"../utils":32,"./GenericWorker":28}],26:[function(h,z,p){var a=h("../utils"),i=h("./GenericWorker");function r(o){i.call(this,"DataLengthProbe for "+o),this.propName=o,this.withStreamInfo(o,0)}a.inherits(r,i),r.prototype.processChunk=function(o){if(o){var _=this.streamInfo[this.propName]||0;this.streamInfo[this.propName]=_+o.data.length}i.prototype.processChunk.call(this,o)},z.exports=r},{"../utils":32,"./GenericWorker":28}],27:[function(h,z,p){var a=h("../utils"),i=h("./GenericWorker");function r(o){i.call(this,"DataWorker");var _=this;this.dataIsReady=!1,this.index=0,this.max=0,this.data=null,this.type="",this._tickScheduled=!1,o.then(function(v){_.dataIsReady=!0,_.data=v,_.max=v&&v.length||0,_.type=a.getTypeOf(v),_.isPaused||_._tickAndRepeat()},function(v){_.error(v)})}a.inherits(r,i),r.prototype.cleanUp=function(){i.prototype.cleanUp.call(this),this.data=null},r.prototype.resume=function(){return!!i.prototype.resume.call(this)&&(!this._tickScheduled&&this.dataIsReady&&(this._tickScheduled=!0,a.delay(this._tickAndRepeat,[],this)),!0)},r.prototype._tickAndRepeat=function(){this._tickScheduled=!1,this.isPaused||this.isFinished||(this._tick(),this.isFinished||(a.delay(this._tickAndRepeat,[],this),this._tickScheduled=!0))},r.prototype._tick=function(){if(this.isPaused||this.isFinished)return!1;var o=null,_=Math.min(this.max,this.index+16384);if(this.index>=this.max)return this.end();switch(this.type){case"string":o=this.data.substring(this.index,_);break;case"uint8array":o=this.data.subarray(this.index,_);break;case"array":case"nodebuffer":o=this.data.slice(this.index,_)}return this.index=_,this.push({data:o,meta:{percent:this.max?this.index/this.max*100:0}})},z.exports=r},{"../utils":32,"./GenericWorker":28}],28:[function(h,z,p){function a(i){this.name=i||"default",this.streamInfo={},this.generatedError=null,this.extraStreamInfo={},this.isPaused=!0,this.isFinished=!1,this.isLocked=!1,this._listeners={data:[],end:[],error:[]},this.previous=null}a.prototype={push:function(i){this.emit("data",i)},end:function(){if(this.isFinished)return!1;this.flush();try{this.emit("end"),this.cleanUp(),this.isFinished=!0}catch(i){this.emit("error",i)}return!0},error:function(i){return!this.isFinished&&(this.isPaused?this.generatedError=i:(this.isFinished=!0,this.emit("error",i),this.previous&&this.previous.error(i),this.cleanUp()),!0)},on:function(i,r){return this._listeners[i].push(r),this},cleanUp:function(){this.streamInfo=this.generatedError=this.extraStreamInfo=null,this._listeners=[]},emit:function(i,r){if(this._listeners[i])for(var o=0;o<this._listeners[i].length;o++)this._listeners[i][o].call(this,r)},pipe:function(i){return i.registerPrevious(this)},registerPrevious:function(i){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.streamInfo=i.streamInfo,this.mergeStreamInfo(),this.previous=i;var r=this;return i.on("data",function(o){r.processChunk(o)}),i.on("end",function(){r.end()}),i.on("error",function(o){r.error(o)}),this},pause:function(){return!this.isPaused&&!this.isFinished&&(this.isPaused=!0,this.previous&&this.previous.pause(),!0)},resume:function(){if(!this.isPaused||this.isFinished)return!1;var i=this.isPaused=!1;return this.generatedError&&(this.error(this.generatedError),i=!0),this.previous&&this.previous.resume(),!i},flush:function(){},processChunk:function(i){this.push(i)},withStreamInfo:function(i,r){return this.extraStreamInfo[i]=r,this.mergeStreamInfo(),this},mergeStreamInfo:function(){for(var i in this.extraStreamInfo)Object.prototype.hasOwnProperty.call(this.extraStreamInfo,i)&&(this.streamInfo[i]=this.extraStreamInfo[i])},lock:function(){if(this.isLocked)throw new Error("The stream '"+this+"' has already been used.");this.isLocked=!0,this.previous&&this.previous.lock()},toString:function(){var i="Worker "+this.name;return this.previous?this.previous+" -> "+i:i}},z.exports=a},{}],29:[function(h,z,p){var a=h("../utils"),i=h("./ConvertWorker"),r=h("./GenericWorker"),o=h("../base64"),_=h("../support"),v=h("../external"),g=null;if(_.nodestream)try{g=h("../nodejs/NodejsStreamOutputAdapter")}catch{}function b(f,n){return new v.Promise(function(u,l){var m=[],w=f._internalType,E=f._outputType,x=f._mimeType;f.on("data",function(P,O){m.push(P),n&&n(O)}).on("error",function(P){m=[],l(P)}).on("end",function(){try{var P=function(O,j,B){switch(O){case"blob":return a.newBlob(a.transformTo("arraybuffer",j),B);case"base64":return o.encode(j);default:return a.transformTo(O,j)}}(E,function(O,j){var B,Z=0,V=null,y=0;for(B=0;B<j.length;B++)y+=j[B].length;switch(O){case"string":return j.join("");case"array":return Array.prototype.concat.apply([],j);case"uint8array":for(V=new Uint8Array(y),B=0;B<j.length;B++)V.set(j[B],Z),Z+=j[B].length;return V;case"nodebuffer":return Buffer.concat(j);default:throw new Error("concat : unsupported type '"+O+"'")}}(w,m),x);u(P)}catch(O){l(O)}m=[]}).resume()})}function s(f,n,u){var l=n;switch(n){case"blob":case"arraybuffer":l="uint8array";break;case"base64":l="string"}try{this._internalType=l,this._outputType=n,this._mimeType=u,a.checkSupport(l),this._worker=f.pipe(new i(l)),f.lock()}catch(m){this._worker=new r("error"),this._worker.error(m)}}s.prototype={accumulate:function(f){return b(this,f)},on:function(f,n){var u=this;return f==="data"?this._worker.on(f,function(l){n.call(u,l.data,l.meta)}):this._worker.on(f,function(){a.delay(n,arguments,u)}),this},resume:function(){return a.delay(this._worker.resume,[],this._worker),this},pause:function(){return this._worker.pause(),this},toNodejsStream:function(f){if(a.checkSupport("nodestream"),this._outputType!=="nodebuffer")throw new Error(this._outputType+" is not supported by this method");return new g(this,{objectMode:this._outputType!=="nodebuffer"},f)}},z.exports=s},{"../base64":1,"../external":6,"../nodejs/NodejsStreamOutputAdapter":13,"../support":30,"../utils":32,"./ConvertWorker":24,"./GenericWorker":28}],30:[function(h,z,p){if(p.base64=!0,p.array=!0,p.string=!0,p.arraybuffer=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u",p.nodebuffer=typeof Buffer<"u",p.uint8array=typeof Uint8Array<"u",typeof ArrayBuffer>"u")p.blob=!1;else{var a=new ArrayBuffer(0);try{p.blob=new Blob([a],{type:"application/zip"}).size===0}catch{try{var i=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);i.append(a),p.blob=i.getBlob("application/zip").size===0}catch{p.blob=!1}}}try{p.nodestream=!!h("readable-stream").Readable}catch{p.nodestream=!1}},{"readable-stream":16}],31:[function(h,z,p){for(var a=h("./utils"),i=h("./support"),r=h("./nodejsUtils"),o=h("./stream/GenericWorker"),_=new Array(256),v=0;v<256;v++)_[v]=252<=v?6:248<=v?5:240<=v?4:224<=v?3:192<=v?2:1;_[254]=_[254]=1;function g(){o.call(this,"utf-8 decode"),this.leftOver=null}function b(){o.call(this,"utf-8 encode")}p.utf8encode=function(s){return i.nodebuffer?r.newBufferFrom(s,"utf-8"):function(f){var n,u,l,m,w,E=f.length,x=0;for(m=0;m<E;m++)(64512&(u=f.charCodeAt(m)))==55296&&m+1<E&&(64512&(l=f.charCodeAt(m+1)))==56320&&(u=65536+(u-55296<<10)+(l-56320),m++),x+=u<128?1:u<2048?2:u<65536?3:4;for(n=i.uint8array?new Uint8Array(x):new Array(x),m=w=0;w<x;m++)(64512&(u=f.charCodeAt(m)))==55296&&m+1<E&&(64512&(l=f.charCodeAt(m+1)))==56320&&(u=65536+(u-55296<<10)+(l-56320),m++),u<128?n[w++]=u:(u<2048?n[w++]=192|u>>>6:(u<65536?n[w++]=224|u>>>12:(n[w++]=240|u>>>18,n[w++]=128|u>>>12&63),n[w++]=128|u>>>6&63),n[w++]=128|63&u);return n}(s)},p.utf8decode=function(s){return i.nodebuffer?a.transformTo("nodebuffer",s).toString("utf-8"):function(f){var n,u,l,m,w=f.length,E=new Array(2*w);for(n=u=0;n<w;)if((l=f[n++])<128)E[u++]=l;else if(4<(m=_[l]))E[u++]=65533,n+=m-1;else{for(l&=m===2?31:m===3?15:7;1<m&&n<w;)l=l<<6|63&f[n++],m--;1<m?E[u++]=65533:l<65536?E[u++]=l:(l-=65536,E[u++]=55296|l>>10&1023,E[u++]=56320|1023&l)}return E.length!==u&&(E.subarray?E=E.subarray(0,u):E.length=u),a.applyFromCharCode(E)}(s=a.transformTo(i.uint8array?"uint8array":"array",s))},a.inherits(g,o),g.prototype.processChunk=function(s){var f=a.transformTo(i.uint8array?"uint8array":"array",s.data);if(this.leftOver&&this.leftOver.length){if(i.uint8array){var n=f;(f=new Uint8Array(n.length+this.leftOver.length)).set(this.leftOver,0),f.set(n,this.leftOver.length)}else f=this.leftOver.concat(f);this.leftOver=null}var u=function(m,w){var E;for((w=w||m.length)>m.length&&(w=m.length),E=w-1;0<=E&&(192&m[E])==128;)E--;return E<0||E===0?w:E+_[m[E]]>w?E:w}(f),l=f;u!==f.length&&(i.uint8array?(l=f.subarray(0,u),this.leftOver=f.subarray(u,f.length)):(l=f.slice(0,u),this.leftOver=f.slice(u,f.length))),this.push({data:p.utf8decode(l),meta:s.meta})},g.prototype.flush=function(){this.leftOver&&this.leftOver.length&&(this.push({data:p.utf8decode(this.leftOver),meta:{}}),this.leftOver=null)},p.Utf8DecodeWorker=g,a.inherits(b,o),b.prototype.processChunk=function(s){this.push({data:p.utf8encode(s.data),meta:s.meta})},p.Utf8EncodeWorker=b},{"./nodejsUtils":14,"./stream/GenericWorker":28,"./support":30,"./utils":32}],32:[function(h,z,p){var a=h("./support"),i=h("./base64"),r=h("./nodejsUtils"),o=h("./external");function _(n){return n}function v(n,u){for(var l=0;l<n.length;++l)u[l]=255&n.charCodeAt(l);return u}h("setimmediate"),p.newBlob=function(n,u){p.checkSupport("blob");try{return new Blob([n],{type:u})}catch{try{var l=new(self.BlobBuilder||self.WebKitBlobBuilder||self.MozBlobBuilder||self.MSBlobBuilder);return l.append(n),l.getBlob(u)}catch{throw new Error("Bug : can't construct the Blob.")}}};var g={stringifyByChunk:function(n,u,l){var m=[],w=0,E=n.length;if(E<=l)return String.fromCharCode.apply(null,n);for(;w<E;)u==="array"||u==="nodebuffer"?m.push(String.fromCharCode.apply(null,n.slice(w,Math.min(w+l,E)))):m.push(String.fromCharCode.apply(null,n.subarray(w,Math.min(w+l,E)))),w+=l;return m.join("")},stringifyByChar:function(n){for(var u="",l=0;l<n.length;l++)u+=String.fromCharCode(n[l]);return u},applyCanBeUsed:{uint8array:function(){try{return a.uint8array&&String.fromCharCode.apply(null,new Uint8Array(1)).length===1}catch{return!1}}(),nodebuffer:function(){try{return a.nodebuffer&&String.fromCharCode.apply(null,r.allocBuffer(1)).length===1}catch{return!1}}()}};function b(n){var u=65536,l=p.getTypeOf(n),m=!0;if(l==="uint8array"?m=g.applyCanBeUsed.uint8array:l==="nodebuffer"&&(m=g.applyCanBeUsed.nodebuffer),m)for(;1<u;)try{return g.stringifyByChunk(n,l,u)}catch{u=Math.floor(u/2)}return g.stringifyByChar(n)}function s(n,u){for(var l=0;l<n.length;l++)u[l]=n[l];return u}p.applyFromCharCode=b;var f={};f.string={string:_,array:function(n){return v(n,new Array(n.length))},arraybuffer:function(n){return f.string.uint8array(n).buffer},uint8array:function(n){return v(n,new Uint8Array(n.length))},nodebuffer:function(n){return v(n,r.allocBuffer(n.length))}},f.array={string:b,array:_,arraybuffer:function(n){return new Uint8Array(n).buffer},uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return r.newBufferFrom(n)}},f.arraybuffer={string:function(n){return b(new Uint8Array(n))},array:function(n){return s(new Uint8Array(n),new Array(n.byteLength))},arraybuffer:_,uint8array:function(n){return new Uint8Array(n)},nodebuffer:function(n){return r.newBufferFrom(new Uint8Array(n))}},f.uint8array={string:b,array:function(n){return s(n,new Array(n.length))},arraybuffer:function(n){return n.buffer},uint8array:_,nodebuffer:function(n){return r.newBufferFrom(n)}},f.nodebuffer={string:b,array:function(n){return s(n,new Array(n.length))},arraybuffer:function(n){return f.nodebuffer.uint8array(n).buffer},uint8array:function(n){return s(n,new Uint8Array(n.length))},nodebuffer:_},p.transformTo=function(n,u){if(u=u||"",!n)return u;p.checkSupport(n);var l=p.getTypeOf(u);return f[l][n](u)},p.resolve=function(n){for(var u=n.split("/"),l=[],m=0;m<u.length;m++){var w=u[m];w==="."||w===""&&m!==0&&m!==u.length-1||(w===".."?l.pop():l.push(w))}return l.join("/")},p.getTypeOf=function(n){return typeof n=="string"?"string":Object.prototype.toString.call(n)==="[object Array]"?"array":a.nodebuffer&&r.isBuffer(n)?"nodebuffer":a.uint8array&&n instanceof Uint8Array?"uint8array":a.arraybuffer&&n instanceof ArrayBuffer?"arraybuffer":void 0},p.checkSupport=function(n){if(!a[n.toLowerCase()])throw new Error(n+" is not supported by this platform")},p.MAX_VALUE_16BITS=65535,p.MAX_VALUE_32BITS=-1,p.pretty=function(n){var u,l,m="";for(l=0;l<(n||"").length;l++)m+="\\x"+((u=n.charCodeAt(l))<16?"0":"")+u.toString(16).toUpperCase();return m},p.delay=function(n,u,l){setImmediate(function(){n.apply(l||null,u||[])})},p.inherits=function(n,u){function l(){}l.prototype=u.prototype,n.prototype=new l},p.extend=function(){var n,u,l={};for(n=0;n<arguments.length;n++)for(u in arguments[n])Object.prototype.hasOwnProperty.call(arguments[n],u)&&l[u]===void 0&&(l[u]=arguments[n][u]);return l},p.prepareContent=function(n,u,l,m,w){return o.Promise.resolve(u).then(function(E){return a.blob&&(E instanceof Blob||["[object File]","[object Blob]"].indexOf(Object.prototype.toString.call(E))!==-1)&&typeof FileReader<"u"?new o.Promise(function(x,P){var O=new FileReader;O.onload=function(j){x(j.target.result)},O.onerror=function(j){P(j.target.error)},O.readAsArrayBuffer(E)}):E}).then(function(E){var x=p.getTypeOf(E);return x?(x==="arraybuffer"?E=p.transformTo("uint8array",E):x==="string"&&(w?E=i.decode(E):l&&m!==!0&&(E=function(P){return v(P,a.uint8array?new Uint8Array(P.length):new Array(P.length))}(E))),E):o.Promise.reject(new Error("Can't read the data of '"+n+"'. Is it in a supported JavaScript type (String, Blob, ArrayBuffer, etc) ?"))})}},{"./base64":1,"./external":6,"./nodejsUtils":14,"./support":30,setimmediate:54}],33:[function(h,z,p){var a=h("./reader/readerFor"),i=h("./utils"),r=h("./signature"),o=h("./zipEntry"),_=h("./support");function v(g){this.files=[],this.loadOptions=g}v.prototype={checkSignature:function(g){if(!this.reader.readAndCheckSignature(g)){this.reader.index-=4;var b=this.reader.readString(4);throw new Error("Corrupted zip or bug: unexpected signature ("+i.pretty(b)+", expected "+i.pretty(g)+")")}},isSignature:function(g,b){var s=this.reader.index;this.reader.setIndex(g);var f=this.reader.readString(4)===b;return this.reader.setIndex(s),f},readBlockEndOfCentral:function(){this.diskNumber=this.reader.readInt(2),this.diskWithCentralDirStart=this.reader.readInt(2),this.centralDirRecordsOnThisDisk=this.reader.readInt(2),this.centralDirRecords=this.reader.readInt(2),this.centralDirSize=this.reader.readInt(4),this.centralDirOffset=this.reader.readInt(4),this.zipCommentLength=this.reader.readInt(2);var g=this.reader.readData(this.zipCommentLength),b=_.uint8array?"uint8array":"array",s=i.transformTo(b,g);this.zipComment=this.loadOptions.decodeFileName(s)},readBlockZip64EndOfCentral:function(){this.zip64EndOfCentralSize=this.reader.readInt(8),this.reader.skip(4),this.diskNumber=this.reader.readInt(4),this.diskWithCentralDirStart=this.reader.readInt(4),this.centralDirRecordsOnThisDisk=this.reader.readInt(8),this.centralDirRecords=this.reader.readInt(8),this.centralDirSize=this.reader.readInt(8),this.centralDirOffset=this.reader.readInt(8),this.zip64ExtensibleData={};for(var g,b,s,f=this.zip64EndOfCentralSize-44;0<f;)g=this.reader.readInt(2),b=this.reader.readInt(4),s=this.reader.readData(b),this.zip64ExtensibleData[g]={id:g,length:b,value:s}},readBlockZip64EndOfCentralLocator:function(){if(this.diskWithZip64CentralDirStart=this.reader.readInt(4),this.relativeOffsetEndOfZip64CentralDir=this.reader.readInt(8),this.disksCount=this.reader.readInt(4),1<this.disksCount)throw new Error("Multi-volumes zip are not supported")},readLocalFiles:function(){var g,b;for(g=0;g<this.files.length;g++)b=this.files[g],this.reader.setIndex(b.localHeaderOffset),this.checkSignature(r.LOCAL_FILE_HEADER),b.readLocalPart(this.reader),b.handleUTF8(),b.processAttributes()},readCentralDir:function(){var g;for(this.reader.setIndex(this.centralDirOffset);this.reader.readAndCheckSignature(r.CENTRAL_FILE_HEADER);)(g=new o({zip64:this.zip64},this.loadOptions)).readCentralPart(this.reader),this.files.push(g);if(this.centralDirRecords!==this.files.length&&this.centralDirRecords!==0&&this.files.length===0)throw new Error("Corrupted zip or bug: expected "+this.centralDirRecords+" records in central dir, got "+this.files.length)},readEndOfCentral:function(){var g=this.reader.lastIndexOfSignature(r.CENTRAL_DIRECTORY_END);if(g<0)throw this.isSignature(0,r.LOCAL_FILE_HEADER)?new Error("Corrupted zip: can't find end of central directory"):new Error("Can't find end of central directory : is this a zip file ? If it is, see https://stuk.github.io/jszip/documentation/howto/read_zip.html");this.reader.setIndex(g);var b=g;if(this.checkSignature(r.CENTRAL_DIRECTORY_END),this.readBlockEndOfCentral(),this.diskNumber===i.MAX_VALUE_16BITS||this.diskWithCentralDirStart===i.MAX_VALUE_16BITS||this.centralDirRecordsOnThisDisk===i.MAX_VALUE_16BITS||this.centralDirRecords===i.MAX_VALUE_16BITS||this.centralDirSize===i.MAX_VALUE_32BITS||this.centralDirOffset===i.MAX_VALUE_32BITS){if(this.zip64=!0,(g=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR))<0)throw new Error("Corrupted zip: can't find the ZIP64 end of central directory locator");if(this.reader.setIndex(g),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_LOCATOR),this.readBlockZip64EndOfCentralLocator(),!this.isSignature(this.relativeOffsetEndOfZip64CentralDir,r.ZIP64_CENTRAL_DIRECTORY_END)&&(this.relativeOffsetEndOfZip64CentralDir=this.reader.lastIndexOfSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.relativeOffsetEndOfZip64CentralDir<0))throw new Error("Corrupted zip: can't find the ZIP64 end of central directory");this.reader.setIndex(this.relativeOffsetEndOfZip64CentralDir),this.checkSignature(r.ZIP64_CENTRAL_DIRECTORY_END),this.readBlockZip64EndOfCentral()}var s=this.centralDirOffset+this.centralDirSize;this.zip64&&(s+=20,s+=12+this.zip64EndOfCentralSize);var f=b-s;if(0<f)this.isSignature(b,r.CENTRAL_FILE_HEADER)||(this.reader.zero=f);else if(f<0)throw new Error("Corrupted zip: missing "+Math.abs(f)+" bytes.")},prepareReader:function(g){this.reader=a(g)},load:function(g){this.prepareReader(g),this.readEndOfCentral(),this.readCentralDir(),this.readLocalFiles()}},z.exports=v},{"./reader/readerFor":22,"./signature":23,"./support":30,"./utils":32,"./zipEntry":34}],34:[function(h,z,p){var a=h("./reader/readerFor"),i=h("./utils"),r=h("./compressedObject"),o=h("./crc32"),_=h("./utf8"),v=h("./compressions"),g=h("./support");function b(s,f){this.options=s,this.loadOptions=f}b.prototype={isEncrypted:function(){return(1&this.bitFlag)==1},useUTF8:function(){return(2048&this.bitFlag)==2048},readLocalPart:function(s){var f,n;if(s.skip(22),this.fileNameLength=s.readInt(2),n=s.readInt(2),this.fileName=s.readData(this.fileNameLength),s.skip(n),this.compressedSize===-1||this.uncompressedSize===-1)throw new Error("Bug or corrupted zip : didn't get enough information from the central directory (compressedSize === -1 || uncompressedSize === -1)");if((f=function(u){for(var l in v)if(Object.prototype.hasOwnProperty.call(v,l)&&v[l].magic===u)return v[l];return null}(this.compressionMethod))===null)throw new Error("Corrupted zip : compression "+i.pretty(this.compressionMethod)+" unknown (inner file : "+i.transformTo("string",this.fileName)+")");this.decompressed=new r(this.compressedSize,this.uncompressedSize,this.crc32,f,s.readData(this.compressedSize))},readCentralPart:function(s){this.versionMadeBy=s.readInt(2),s.skip(2),this.bitFlag=s.readInt(2),this.compressionMethod=s.readString(2),this.date=s.readDate(),this.crc32=s.readInt(4),this.compressedSize=s.readInt(4),this.uncompressedSize=s.readInt(4);var f=s.readInt(2);if(this.extraFieldsLength=s.readInt(2),this.fileCommentLength=s.readInt(2),this.diskNumberStart=s.readInt(2),this.internalFileAttributes=s.readInt(2),this.externalFileAttributes=s.readInt(4),this.localHeaderOffset=s.readInt(4),this.isEncrypted())throw new Error("Encrypted zip are not supported");s.skip(f),this.readExtraFields(s),this.parseZIP64ExtraField(s),this.fileComment=s.readData(this.fileCommentLength)},processAttributes:function(){this.unixPermissions=null,this.dosPermissions=null;var s=this.versionMadeBy>>8;this.dir=!!(16&this.externalFileAttributes),s==0&&(this.dosPermissions=63&this.externalFileAttributes),s==3&&(this.unixPermissions=this.externalFileAttributes>>16&65535),this.dir||this.fileNameStr.slice(-1)!=="/"||(this.dir=!0)},parseZIP64ExtraField:function(){if(this.extraFields[1]){var s=a(this.extraFields[1].value);this.uncompressedSize===i.MAX_VALUE_32BITS&&(this.uncompressedSize=s.readInt(8)),this.compressedSize===i.MAX_VALUE_32BITS&&(this.compressedSize=s.readInt(8)),this.localHeaderOffset===i.MAX_VALUE_32BITS&&(this.localHeaderOffset=s.readInt(8)),this.diskNumberStart===i.MAX_VALUE_32BITS&&(this.diskNumberStart=s.readInt(4))}},readExtraFields:function(s){var f,n,u,l=s.index+this.extraFieldsLength;for(this.extraFields||(this.extraFields={});s.index+4<l;)f=s.readInt(2),n=s.readInt(2),u=s.readData(n),this.extraFields[f]={id:f,length:n,value:u};s.setIndex(l)},handleUTF8:function(){var s=g.uint8array?"uint8array":"array";if(this.useUTF8())this.fileNameStr=_.utf8decode(this.fileName),this.fileCommentStr=_.utf8decode(this.fileComment);else{var f=this.findExtraFieldUnicodePath();if(f!==null)this.fileNameStr=f;else{var n=i.transformTo(s,this.fileName);this.fileNameStr=this.loadOptions.decodeFileName(n)}var u=this.findExtraFieldUnicodeComment();if(u!==null)this.fileCommentStr=u;else{var l=i.transformTo(s,this.fileComment);this.fileCommentStr=this.loadOptions.decodeFileName(l)}}},findExtraFieldUnicodePath:function(){var s=this.extraFields[28789];if(s){var f=a(s.value);return f.readInt(1)!==1||o(this.fileName)!==f.readInt(4)?null:_.utf8decode(f.readData(s.length-5))}return null},findExtraFieldUnicodeComment:function(){var s=this.extraFields[25461];if(s){var f=a(s.value);return f.readInt(1)!==1||o(this.fileComment)!==f.readInt(4)?null:_.utf8decode(f.readData(s.length-5))}return null}},z.exports=b},{"./compressedObject":2,"./compressions":3,"./crc32":4,"./reader/readerFor":22,"./support":30,"./utf8":31,"./utils":32}],35:[function(h,z,p){function a(f,n,u){this.name=f,this.dir=u.dir,this.date=u.date,this.comment=u.comment,this.unixPermissions=u.unixPermissions,this.dosPermissions=u.dosPermissions,this._data=n,this._dataBinary=u.binary,this.options={compression:u.compression,compressionOptions:u.compressionOptions}}var i=h("./stream/StreamHelper"),r=h("./stream/DataWorker"),o=h("./utf8"),_=h("./compressedObject"),v=h("./stream/GenericWorker");a.prototype={internalStream:function(f){var n=null,u="string";try{if(!f)throw new Error("No output type specified.");var l=(u=f.toLowerCase())==="string"||u==="text";u!=="binarystring"&&u!=="text"||(u="string"),n=this._decompressWorker();var m=!this._dataBinary;m&&!l&&(n=n.pipe(new o.Utf8EncodeWorker)),!m&&l&&(n=n.pipe(new o.Utf8DecodeWorker))}catch(w){(n=new v("error")).error(w)}return new i(n,u,"")},async:function(f,n){return this.internalStream(f).accumulate(n)},nodeStream:function(f,n){return this.internalStream(f||"nodebuffer").toNodejsStream(n)},_compressWorker:function(f,n){if(this._data instanceof _&&this._data.compression.magic===f.magic)return this._data.getCompressedWorker();var u=this._decompressWorker();return this._dataBinary||(u=u.pipe(new o.Utf8EncodeWorker)),_.createWorkerFrom(u,f,n)},_decompressWorker:function(){return this._data instanceof _?this._data.getContentWorker():this._data instanceof v?this._data:new r(this._data)}};for(var g=["asText","asBinary","asNodeBuffer","asUint8Array","asArrayBuffer"],b=function(){throw new Error("This method has been removed in JSZip 3.0, please check the upgrade guide.")},s=0;s<g.length;s++)a.prototype[g[s]]=b;z.exports=a},{"./compressedObject":2,"./stream/DataWorker":27,"./stream/GenericWorker":28,"./stream/StreamHelper":29,"./utf8":31}],36:[function(h,z,p){(function(a){var i,r,o=a.MutationObserver||a.WebKitMutationObserver;if(o){var _=0,v=new o(f),g=a.document.createTextNode("");v.observe(g,{characterData:!0}),i=function(){g.data=_=++_%2}}else if(a.setImmediate||a.MessageChannel===void 0)i="document"in a&&"onreadystatechange"in a.document.createElement("script")?function(){var n=a.document.createElement("script");n.onreadystatechange=function(){f(),n.onreadystatechange=null,n.parentNode.removeChild(n),n=null},a.document.documentElement.appendChild(n)}:function(){setTimeout(f,0)};else{var b=new a.MessageChannel;b.port1.onmessage=f,i=function(){b.port2.postMessage(0)}}var s=[];function f(){var n,u;r=!0;for(var l=s.length;l;){for(u=s,s=[],n=-1;++n<l;)u[n]();l=s.length}r=!1}z.exports=function(n){s.push(n)!==1||r||i()}}).call(this,typeof Lt<"u"?Lt:typeof self<"u"?self:typeof window<"u"?window:{})},{}],37:[function(h,z,p){var a=h("immediate");function i(){}var r={},o=["REJECTED"],_=["FULFILLED"],v=["PENDING"];function g(l){if(typeof l!="function")throw new TypeError("resolver must be a function");this.state=v,this.queue=[],this.outcome=void 0,l!==i&&n(this,l)}function b(l,m,w){this.promise=l,typeof m=="function"&&(this.onFulfilled=m,this.callFulfilled=this.otherCallFulfilled),typeof w=="function"&&(this.onRejected=w,this.callRejected=this.otherCallRejected)}function s(l,m,w){a(function(){var E;try{E=m(w)}catch(x){return r.reject(l,x)}E===l?r.reject(l,new TypeError("Cannot resolve promise with itself")):r.resolve(l,E)})}function f(l){var m=l&&l.then;if(l&&(typeof l=="object"||typeof l=="function")&&typeof m=="function")return function(){m.apply(l,arguments)}}function n(l,m){var w=!1;function E(O){w||(w=!0,r.reject(l,O))}function x(O){w||(w=!0,r.resolve(l,O))}var P=u(function(){m(x,E)});P.status==="error"&&E(P.value)}function u(l,m){var w={};try{w.value=l(m),w.status="success"}catch(E){w.status="error",w.value=E}return w}(z.exports=g).prototype.finally=function(l){if(typeof l!="function")return this;var m=this.constructor;return this.then(function(w){return m.resolve(l()).then(function(){return w})},function(w){return m.resolve(l()).then(function(){throw w})})},g.prototype.catch=function(l){return this.then(null,l)},g.prototype.then=function(l,m){if(typeof l!="function"&&this.state===_||typeof m!="function"&&this.state===o)return this;var w=new this.constructor(i);return this.state!==v?s(w,this.state===_?l:m,this.outcome):this.queue.push(new b(w,l,m)),w},b.prototype.callFulfilled=function(l){r.resolve(this.promise,l)},b.prototype.otherCallFulfilled=function(l){s(this.promise,this.onFulfilled,l)},b.prototype.callRejected=function(l){r.reject(this.promise,l)},b.prototype.otherCallRejected=function(l){s(this.promise,this.onRejected,l)},r.resolve=function(l,m){var w=u(f,m);if(w.status==="error")return r.reject(l,w.value);var E=w.value;if(E)n(l,E);else{l.state=_,l.outcome=m;for(var x=-1,P=l.queue.length;++x<P;)l.queue[x].callFulfilled(m)}return l},r.reject=function(l,m){l.state=o,l.outcome=m;for(var w=-1,E=l.queue.length;++w<E;)l.queue[w].callRejected(m);return l},g.resolve=function(l){return l instanceof this?l:r.resolve(new this(i),l)},g.reject=function(l){var m=new this(i);return r.reject(m,l)},g.all=function(l){var m=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=l.length,E=!1;if(!w)return this.resolve([]);for(var x=new Array(w),P=0,O=-1,j=new this(i);++O<w;)B(l[O],O);return j;function B(Z,V){m.resolve(Z).then(function(y){x[V]=y,++P!==w||E||(E=!0,r.resolve(j,x))},function(y){E||(E=!0,r.reject(j,y))})}},g.race=function(l){var m=this;if(Object.prototype.toString.call(l)!=="[object Array]")return this.reject(new TypeError("must be an array"));var w=l.length,E=!1;if(!w)return this.resolve([]);for(var x=-1,P=new this(i);++x<w;)O=l[x],m.resolve(O).then(function(j){E||(E=!0,r.resolve(P,j))},function(j){E||(E=!0,r.reject(P,j))});var O;return P}},{immediate:36}],38:[function(h,z,p){var a={};(0,h("./lib/utils/common").assign)(a,h("./lib/deflate"),h("./lib/inflate"),h("./lib/zlib/constants")),z.exports=a},{"./lib/deflate":39,"./lib/inflate":40,"./lib/utils/common":41,"./lib/zlib/constants":44}],39:[function(h,z,p){var a=h("./zlib/deflate"),i=h("./utils/common"),r=h("./utils/strings"),o=h("./zlib/messages"),_=h("./zlib/zstream"),v=Object.prototype.toString,g=0,b=-1,s=0,f=8;function n(l){if(!(this instanceof n))return new n(l);this.options=i.assign({level:b,method:f,chunkSize:16384,windowBits:15,memLevel:8,strategy:s,to:""},l||{});var m=this.options;m.raw&&0<m.windowBits?m.windowBits=-m.windowBits:m.gzip&&0<m.windowBits&&m.windowBits<16&&(m.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new _,this.strm.avail_out=0;var w=a.deflateInit2(this.strm,m.level,m.method,m.windowBits,m.memLevel,m.strategy);if(w!==g)throw new Error(o[w]);if(m.header&&a.deflateSetHeader(this.strm,m.header),m.dictionary){var E;if(E=typeof m.dictionary=="string"?r.string2buf(m.dictionary):v.call(m.dictionary)==="[object ArrayBuffer]"?new Uint8Array(m.dictionary):m.dictionary,(w=a.deflateSetDictionary(this.strm,E))!==g)throw new Error(o[w]);this._dict_set=!0}}function u(l,m){var w=new n(m);if(w.push(l,!0),w.err)throw w.msg||o[w.err];return w.result}n.prototype.push=function(l,m){var w,E,x=this.strm,P=this.options.chunkSize;if(this.ended)return!1;E=m===~~m?m:m===!0?4:0,typeof l=="string"?x.input=r.string2buf(l):v.call(l)==="[object ArrayBuffer]"?x.input=new Uint8Array(l):x.input=l,x.next_in=0,x.avail_in=x.input.length;do{if(x.avail_out===0&&(x.output=new i.Buf8(P),x.next_out=0,x.avail_out=P),(w=a.deflate(x,E))!==1&&w!==g)return this.onEnd(w),!(this.ended=!0);x.avail_out!==0&&(x.avail_in!==0||E!==4&&E!==2)||(this.options.to==="string"?this.onData(r.buf2binstring(i.shrinkBuf(x.output,x.next_out))):this.onData(i.shrinkBuf(x.output,x.next_out)))}while((0<x.avail_in||x.avail_out===0)&&w!==1);return E===4?(w=a.deflateEnd(this.strm),this.onEnd(w),this.ended=!0,w===g):E!==2||(this.onEnd(g),!(x.avail_out=0))},n.prototype.onData=function(l){this.chunks.push(l)},n.prototype.onEnd=function(l){l===g&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=l,this.msg=this.strm.msg},p.Deflate=n,p.deflate=u,p.deflateRaw=function(l,m){return(m=m||{}).raw=!0,u(l,m)},p.gzip=function(l,m){return(m=m||{}).gzip=!0,u(l,m)}},{"./utils/common":41,"./utils/strings":42,"./zlib/deflate":46,"./zlib/messages":51,"./zlib/zstream":53}],40:[function(h,z,p){var a=h("./zlib/inflate"),i=h("./utils/common"),r=h("./utils/strings"),o=h("./zlib/constants"),_=h("./zlib/messages"),v=h("./zlib/zstream"),g=h("./zlib/gzheader"),b=Object.prototype.toString;function s(n){if(!(this instanceof s))return new s(n);this.options=i.assign({chunkSize:16384,windowBits:0,to:""},n||{});var u=this.options;u.raw&&0<=u.windowBits&&u.windowBits<16&&(u.windowBits=-u.windowBits,u.windowBits===0&&(u.windowBits=-15)),!(0<=u.windowBits&&u.windowBits<16)||n&&n.windowBits||(u.windowBits+=32),15<u.windowBits&&u.windowBits<48&&!(15&u.windowBits)&&(u.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new v,this.strm.avail_out=0;var l=a.inflateInit2(this.strm,u.windowBits);if(l!==o.Z_OK)throw new Error(_[l]);this.header=new g,a.inflateGetHeader(this.strm,this.header)}function f(n,u){var l=new s(u);if(l.push(n,!0),l.err)throw l.msg||_[l.err];return l.result}s.prototype.push=function(n,u){var l,m,w,E,x,P,O=this.strm,j=this.options.chunkSize,B=this.options.dictionary,Z=!1;if(this.ended)return!1;m=u===~~u?u:u===!0?o.Z_FINISH:o.Z_NO_FLUSH,typeof n=="string"?O.input=r.binstring2buf(n):b.call(n)==="[object ArrayBuffer]"?O.input=new Uint8Array(n):O.input=n,O.next_in=0,O.avail_in=O.input.length;do{if(O.avail_out===0&&(O.output=new i.Buf8(j),O.next_out=0,O.avail_out=j),(l=a.inflate(O,o.Z_NO_FLUSH))===o.Z_NEED_DICT&&B&&(P=typeof B=="string"?r.string2buf(B):b.call(B)==="[object ArrayBuffer]"?new Uint8Array(B):B,l=a.inflateSetDictionary(this.strm,P)),l===o.Z_BUF_ERROR&&Z===!0&&(l=o.Z_OK,Z=!1),l!==o.Z_STREAM_END&&l!==o.Z_OK)return this.onEnd(l),!(this.ended=!0);O.next_out&&(O.avail_out!==0&&l!==o.Z_STREAM_END&&(O.avail_in!==0||m!==o.Z_FINISH&&m!==o.Z_SYNC_FLUSH)||(this.options.to==="string"?(w=r.utf8border(O.output,O.next_out),E=O.next_out-w,x=r.buf2string(O.output,w),O.next_out=E,O.avail_out=j-E,E&&i.arraySet(O.output,O.output,w,E,0),this.onData(x)):this.onData(i.shrinkBuf(O.output,O.next_out)))),O.avail_in===0&&O.avail_out===0&&(Z=!0)}while((0<O.avail_in||O.avail_out===0)&&l!==o.Z_STREAM_END);return l===o.Z_STREAM_END&&(m=o.Z_FINISH),m===o.Z_FINISH?(l=a.inflateEnd(this.strm),this.onEnd(l),this.ended=!0,l===o.Z_OK):m!==o.Z_SYNC_FLUSH||(this.onEnd(o.Z_OK),!(O.avail_out=0))},s.prototype.onData=function(n){this.chunks.push(n)},s.prototype.onEnd=function(n){n===o.Z_OK&&(this.options.to==="string"?this.result=this.chunks.join(""):this.result=i.flattenChunks(this.chunks)),this.chunks=[],this.err=n,this.msg=this.strm.msg},p.Inflate=s,p.inflate=f,p.inflateRaw=function(n,u){return(u=u||{}).raw=!0,f(n,u)},p.ungzip=f},{"./utils/common":41,"./utils/strings":42,"./zlib/constants":44,"./zlib/gzheader":47,"./zlib/inflate":49,"./zlib/messages":51,"./zlib/zstream":53}],41:[function(h,z,p){var a=typeof Uint8Array<"u"&&typeof Uint16Array<"u"&&typeof Int32Array<"u";p.assign=function(o){for(var _=Array.prototype.slice.call(arguments,1);_.length;){var v=_.shift();if(v){if(typeof v!="object")throw new TypeError(v+"must be non-object");for(var g in v)v.hasOwnProperty(g)&&(o[g]=v[g])}}return o},p.shrinkBuf=function(o,_){return o.length===_?o:o.subarray?o.subarray(0,_):(o.length=_,o)};var i={arraySet:function(o,_,v,g,b){if(_.subarray&&o.subarray)o.set(_.subarray(v,v+g),b);else for(var s=0;s<g;s++)o[b+s]=_[v+s]},flattenChunks:function(o){var _,v,g,b,s,f;for(_=g=0,v=o.length;_<v;_++)g+=o[_].length;for(f=new Uint8Array(g),_=b=0,v=o.length;_<v;_++)s=o[_],f.set(s,b),b+=s.length;return f}},r={arraySet:function(o,_,v,g,b){for(var s=0;s<g;s++)o[b+s]=_[v+s]},flattenChunks:function(o){return[].concat.apply([],o)}};p.setTyped=function(o){o?(p.Buf8=Uint8Array,p.Buf16=Uint16Array,p.Buf32=Int32Array,p.assign(p,i)):(p.Buf8=Array,p.Buf16=Array,p.Buf32=Array,p.assign(p,r))},p.setTyped(a)},{}],42:[function(h,z,p){var a=h("./common"),i=!0,r=!0;try{String.fromCharCode.apply(null,[0])}catch{i=!1}try{String.fromCharCode.apply(null,new Uint8Array(1))}catch{r=!1}for(var o=new a.Buf8(256),_=0;_<256;_++)o[_]=252<=_?6:248<=_?5:240<=_?4:224<=_?3:192<=_?2:1;function v(g,b){if(b<65537&&(g.subarray&&r||!g.subarray&&i))return String.fromCharCode.apply(null,a.shrinkBuf(g,b));for(var s="",f=0;f<b;f++)s+=String.fromCharCode(g[f]);return s}o[254]=o[254]=1,p.string2buf=function(g){var b,s,f,n,u,l=g.length,m=0;for(n=0;n<l;n++)(64512&(s=g.charCodeAt(n)))==55296&&n+1<l&&(64512&(f=g.charCodeAt(n+1)))==56320&&(s=65536+(s-55296<<10)+(f-56320),n++),m+=s<128?1:s<2048?2:s<65536?3:4;for(b=new a.Buf8(m),n=u=0;u<m;n++)(64512&(s=g.charCodeAt(n)))==55296&&n+1<l&&(64512&(f=g.charCodeAt(n+1)))==56320&&(s=65536+(s-55296<<10)+(f-56320),n++),s<128?b[u++]=s:(s<2048?b[u++]=192|s>>>6:(s<65536?b[u++]=224|s>>>12:(b[u++]=240|s>>>18,b[u++]=128|s>>>12&63),b[u++]=128|s>>>6&63),b[u++]=128|63&s);return b},p.buf2binstring=function(g){return v(g,g.length)},p.binstring2buf=function(g){for(var b=new a.Buf8(g.length),s=0,f=b.length;s<f;s++)b[s]=g.charCodeAt(s);return b},p.buf2string=function(g,b){var s,f,n,u,l=b||g.length,m=new Array(2*l);for(s=f=0;s<l;)if((n=g[s++])<128)m[f++]=n;else if(4<(u=o[n]))m[f++]=65533,s+=u-1;else{for(n&=u===2?31:u===3?15:7;1<u&&s<l;)n=n<<6|63&g[s++],u--;1<u?m[f++]=65533:n<65536?m[f++]=n:(n-=65536,m[f++]=55296|n>>10&1023,m[f++]=56320|1023&n)}return v(m,f)},p.utf8border=function(g,b){var s;for((b=b||g.length)>g.length&&(b=g.length),s=b-1;0<=s&&(192&g[s])==128;)s--;return s<0||s===0?b:s+o[g[s]]>b?s:b}},{"./common":41}],43:[function(h,z,p){z.exports=function(a,i,r,o){for(var _=65535&a|0,v=a>>>16&65535|0,g=0;r!==0;){for(r-=g=2e3<r?2e3:r;v=v+(_=_+i[o++]|0)|0,--g;);_%=65521,v%=65521}return _|v<<16|0}},{}],44:[function(h,z,p){z.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},{}],45:[function(h,z,p){var a=function(){for(var i,r=[],o=0;o<256;o++){i=o;for(var _=0;_<8;_++)i=1&i?3988292384^i>>>1:i>>>1;r[o]=i}return r}();z.exports=function(i,r,o,_){var v=a,g=_+o;i^=-1;for(var b=_;b<g;b++)i=i>>>8^v[255&(i^r[b])];return-1^i}},{}],46:[function(h,z,p){var a,i=h("../utils/common"),r=h("./trees"),o=h("./adler32"),_=h("./crc32"),v=h("./messages"),g=0,b=4,s=0,f=-2,n=-1,u=4,l=2,m=8,w=9,E=286,x=30,P=19,O=2*E+1,j=15,B=3,Z=258,V=Z+B+1,y=42,R=113,e=1,D=2,Q=3,U=4;function tt(t,L){return t.msg=v[L],L}function M(t){return(t<<1)-(4<t?9:0)}function J(t){for(var L=t.length;0<=--L;)t[L]=0}function A(t){var L=t.state,I=L.pending;I>t.avail_out&&(I=t.avail_out),I!==0&&(i.arraySet(t.output,L.pending_buf,L.pending_out,I,t.next_out),t.next_out+=I,L.pending_out+=I,t.total_out+=I,t.avail_out-=I,L.pending-=I,L.pending===0&&(L.pending_out=0))}function C(t,L){r._tr_flush_block(t,0<=t.block_start?t.block_start:-1,t.strstart-t.block_start,L),t.block_start=t.strstart,A(t.strm)}function X(t,L){t.pending_buf[t.pending++]=L}function $(t,L){t.pending_buf[t.pending++]=L>>>8&255,t.pending_buf[t.pending++]=255&L}function H(t,L){var I,d,c=t.max_chain_length,k=t.strstart,F=t.prev_length,N=t.nice_match,S=t.strstart>t.w_size-V?t.strstart-(t.w_size-V):0,W=t.window,q=t.w_mask,G=t.prev,Y=t.strstart+Z,it=W[k+F-1],rt=W[k+F];t.prev_length>=t.good_match&&(c>>=2),N>t.lookahead&&(N=t.lookahead);do if(W[(I=L)+F]===rt&&W[I+F-1]===it&&W[I]===W[k]&&W[++I]===W[k+1]){k+=2,I++;do;while(W[++k]===W[++I]&&W[++k]===W[++I]&&W[++k]===W[++I]&&W[++k]===W[++I]&&W[++k]===W[++I]&&W[++k]===W[++I]&&W[++k]===W[++I]&&W[++k]===W[++I]&&k<Y);if(d=Z-(Y-k),k=Y-Z,F<d){if(t.match_start=L,N<=(F=d))break;it=W[k+F-1],rt=W[k+F]}}while((L=G[L&q])>S&&--c!=0);return F<=t.lookahead?F:t.lookahead}function st(t){var L,I,d,c,k,F,N,S,W,q,G=t.w_size;do{if(c=t.window_size-t.lookahead-t.strstart,t.strstart>=G+(G-V)){for(i.arraySet(t.window,t.window,G,G,0),t.match_start-=G,t.strstart-=G,t.block_start-=G,L=I=t.hash_size;d=t.head[--L],t.head[L]=G<=d?d-G:0,--I;);for(L=I=G;d=t.prev[--L],t.prev[L]=G<=d?d-G:0,--I;);c+=G}if(t.strm.avail_in===0)break;if(F=t.strm,N=t.window,S=t.strstart+t.lookahead,W=c,q=void 0,q=F.avail_in,W<q&&(q=W),I=q===0?0:(F.avail_in-=q,i.arraySet(N,F.input,F.next_in,q,S),F.state.wrap===1?F.adler=o(F.adler,N,q,S):F.state.wrap===2&&(F.adler=_(F.adler,N,q,S)),F.next_in+=q,F.total_in+=q,q),t.lookahead+=I,t.lookahead+t.insert>=B)for(k=t.strstart-t.insert,t.ins_h=t.window[k],t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+1])&t.hash_mask;t.insert&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[k+B-1])&t.hash_mask,t.prev[k&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=k,k++,t.insert--,!(t.lookahead+t.insert<B)););}while(t.lookahead<V&&t.strm.avail_in!==0)}function ut(t,L){for(var I,d;;){if(t.lookahead<V){if(st(t),t.lookahead<V&&L===g)return e;if(t.lookahead===0)break}if(I=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),I!==0&&t.strstart-I<=t.w_size-V&&(t.match_length=H(t,I)),t.match_length>=B)if(d=r._tr_tally(t,t.strstart-t.match_start,t.match_length-B),t.lookahead-=t.match_length,t.match_length<=t.max_lazy_match&&t.lookahead>=B){for(t.match_length--;t.strstart++,t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart,--t.match_length!=0;);t.strstart++}else t.strstart+=t.match_length,t.match_length=0,t.ins_h=t.window[t.strstart],t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+1])&t.hash_mask;else d=r._tr_tally(t,0,t.window[t.strstart]),t.lookahead--,t.strstart++;if(d&&(C(t,!1),t.strm.avail_out===0))return e}return t.insert=t.strstart<B-1?t.strstart:B-1,L===b?(C(t,!0),t.strm.avail_out===0?Q:U):t.last_lit&&(C(t,!1),t.strm.avail_out===0)?e:D}function et(t,L){for(var I,d,c;;){if(t.lookahead<V){if(st(t),t.lookahead<V&&L===g)return e;if(t.lookahead===0)break}if(I=0,t.lookahead>=B&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),t.prev_length=t.match_length,t.prev_match=t.match_start,t.match_length=B-1,I!==0&&t.prev_length<t.max_lazy_match&&t.strstart-I<=t.w_size-V&&(t.match_length=H(t,I),t.match_length<=5&&(t.strategy===1||t.match_length===B&&4096<t.strstart-t.match_start)&&(t.match_length=B-1)),t.prev_length>=B&&t.match_length<=t.prev_length){for(c=t.strstart+t.lookahead-B,d=r._tr_tally(t,t.strstart-1-t.prev_match,t.prev_length-B),t.lookahead-=t.prev_length-1,t.prev_length-=2;++t.strstart<=c&&(t.ins_h=(t.ins_h<<t.hash_shift^t.window[t.strstart+B-1])&t.hash_mask,I=t.prev[t.strstart&t.w_mask]=t.head[t.ins_h],t.head[t.ins_h]=t.strstart),--t.prev_length!=0;);if(t.match_available=0,t.match_length=B-1,t.strstart++,d&&(C(t,!1),t.strm.avail_out===0))return e}else if(t.match_available){if((d=r._tr_tally(t,0,t.window[t.strstart-1]))&&C(t,!1),t.strstart++,t.lookahead--,t.strm.avail_out===0)return e}else t.match_available=1,t.strstart++,t.lookahead--}return t.match_available&&(d=r._tr_tally(t,0,t.window[t.strstart-1]),t.match_available=0),t.insert=t.strstart<B-1?t.strstart:B-1,L===b?(C(t,!0),t.strm.avail_out===0?Q:U):t.last_lit&&(C(t,!1),t.strm.avail_out===0)?e:D}function nt(t,L,I,d,c){this.good_length=t,this.max_lazy=L,this.nice_length=I,this.max_chain=d,this.func=c}function ct(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=m,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new i.Buf16(2*O),this.dyn_dtree=new i.Buf16(2*(2*x+1)),this.bl_tree=new i.Buf16(2*(2*P+1)),J(this.dyn_ltree),J(this.dyn_dtree),J(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new i.Buf16(j+1),this.heap=new i.Buf16(2*E+1),J(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new i.Buf16(2*E+1),J(this.depth),this.l_buf=0,this.lit_bufsize=0,this.last_lit=0,this.d_buf=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}function at(t){var L;return t&&t.state?(t.total_in=t.total_out=0,t.data_type=l,(L=t.state).pending=0,L.pending_out=0,L.wrap<0&&(L.wrap=-L.wrap),L.status=L.wrap?y:R,t.adler=L.wrap===2?0:1,L.last_flush=g,r._tr_init(L),s):tt(t,f)}function gt(t){var L=at(t);return L===s&&function(I){I.window_size=2*I.w_size,J(I.head),I.max_lazy_match=a[I.level].max_lazy,I.good_match=a[I.level].good_length,I.nice_match=a[I.level].nice_length,I.max_chain_length=a[I.level].max_chain,I.strstart=0,I.block_start=0,I.lookahead=0,I.insert=0,I.match_length=I.prev_length=B-1,I.match_available=0,I.ins_h=0}(t.state),L}function mt(t,L,I,d,c,k){if(!t)return f;var F=1;if(L===n&&(L=6),d<0?(F=0,d=-d):15<d&&(F=2,d-=16),c<1||w<c||I!==m||d<8||15<d||L<0||9<L||k<0||u<k)return tt(t,f);d===8&&(d=9);var N=new ct;return(t.state=N).strm=t,N.wrap=F,N.gzhead=null,N.w_bits=d,N.w_size=1<<N.w_bits,N.w_mask=N.w_size-1,N.hash_bits=c+7,N.hash_size=1<<N.hash_bits,N.hash_mask=N.hash_size-1,N.hash_shift=~~((N.hash_bits+B-1)/B),N.window=new i.Buf8(2*N.w_size),N.head=new i.Buf16(N.hash_size),N.prev=new i.Buf16(N.w_size),N.lit_bufsize=1<<c+6,N.pending_buf_size=4*N.lit_bufsize,N.pending_buf=new i.Buf8(N.pending_buf_size),N.d_buf=1*N.lit_bufsize,N.l_buf=3*N.lit_bufsize,N.level=L,N.strategy=k,N.method=I,gt(t)}a=[new nt(0,0,0,0,function(t,L){var I=65535;for(I>t.pending_buf_size-5&&(I=t.pending_buf_size-5);;){if(t.lookahead<=1){if(st(t),t.lookahead===0&&L===g)return e;if(t.lookahead===0)break}t.strstart+=t.lookahead,t.lookahead=0;var d=t.block_start+I;if((t.strstart===0||t.strstart>=d)&&(t.lookahead=t.strstart-d,t.strstart=d,C(t,!1),t.strm.avail_out===0)||t.strstart-t.block_start>=t.w_size-V&&(C(t,!1),t.strm.avail_out===0))return e}return t.insert=0,L===b?(C(t,!0),t.strm.avail_out===0?Q:U):(t.strstart>t.block_start&&(C(t,!1),t.strm.avail_out),e)}),new nt(4,4,8,4,ut),new nt(4,5,16,8,ut),new nt(4,6,32,32,ut),new nt(4,4,16,16,et),new nt(8,16,32,32,et),new nt(8,16,128,128,et),new nt(8,32,128,256,et),new nt(32,128,258,1024,et),new nt(32,258,258,4096,et)],p.deflateInit=function(t,L){return mt(t,L,m,15,8,0)},p.deflateInit2=mt,p.deflateReset=gt,p.deflateResetKeep=at,p.deflateSetHeader=function(t,L){return t&&t.state?t.state.wrap!==2?f:(t.state.gzhead=L,s):f},p.deflate=function(t,L){var I,d,c,k;if(!t||!t.state||5<L||L<0)return t?tt(t,f):f;if(d=t.state,!t.output||!t.input&&t.avail_in!==0||d.status===666&&L!==b)return tt(t,t.avail_out===0?-5:f);if(d.strm=t,I=d.last_flush,d.last_flush=L,d.status===y)if(d.wrap===2)t.adler=0,X(d,31),X(d,139),X(d,8),d.gzhead?(X(d,(d.gzhead.text?1:0)+(d.gzhead.hcrc?2:0)+(d.gzhead.extra?4:0)+(d.gzhead.name?8:0)+(d.gzhead.comment?16:0)),X(d,255&d.gzhead.time),X(d,d.gzhead.time>>8&255),X(d,d.gzhead.time>>16&255),X(d,d.gzhead.time>>24&255),X(d,d.level===9?2:2<=d.strategy||d.level<2?4:0),X(d,255&d.gzhead.os),d.gzhead.extra&&d.gzhead.extra.length&&(X(d,255&d.gzhead.extra.length),X(d,d.gzhead.extra.length>>8&255)),d.gzhead.hcrc&&(t.adler=_(t.adler,d.pending_buf,d.pending,0)),d.gzindex=0,d.status=69):(X(d,0),X(d,0),X(d,0),X(d,0),X(d,0),X(d,d.level===9?2:2<=d.strategy||d.level<2?4:0),X(d,3),d.status=R);else{var F=m+(d.w_bits-8<<4)<<8;F|=(2<=d.strategy||d.level<2?0:d.level<6?1:d.level===6?2:3)<<6,d.strstart!==0&&(F|=32),F+=31-F%31,d.status=R,$(d,F),d.strstart!==0&&($(d,t.adler>>>16),$(d,65535&t.adler)),t.adler=1}if(d.status===69)if(d.gzhead.extra){for(c=d.pending;d.gzindex<(65535&d.gzhead.extra.length)&&(d.pending!==d.pending_buf_size||(d.gzhead.hcrc&&d.pending>c&&(t.adler=_(t.adler,d.pending_buf,d.pending-c,c)),A(t),c=d.pending,d.pending!==d.pending_buf_size));)X(d,255&d.gzhead.extra[d.gzindex]),d.gzindex++;d.gzhead.hcrc&&d.pending>c&&(t.adler=_(t.adler,d.pending_buf,d.pending-c,c)),d.gzindex===d.gzhead.extra.length&&(d.gzindex=0,d.status=73)}else d.status=73;if(d.status===73)if(d.gzhead.name){c=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>c&&(t.adler=_(t.adler,d.pending_buf,d.pending-c,c)),A(t),c=d.pending,d.pending===d.pending_buf_size)){k=1;break}k=d.gzindex<d.gzhead.name.length?255&d.gzhead.name.charCodeAt(d.gzindex++):0,X(d,k)}while(k!==0);d.gzhead.hcrc&&d.pending>c&&(t.adler=_(t.adler,d.pending_buf,d.pending-c,c)),k===0&&(d.gzindex=0,d.status=91)}else d.status=91;if(d.status===91)if(d.gzhead.comment){c=d.pending;do{if(d.pending===d.pending_buf_size&&(d.gzhead.hcrc&&d.pending>c&&(t.adler=_(t.adler,d.pending_buf,d.pending-c,c)),A(t),c=d.pending,d.pending===d.pending_buf_size)){k=1;break}k=d.gzindex<d.gzhead.comment.length?255&d.gzhead.comment.charCodeAt(d.gzindex++):0,X(d,k)}while(k!==0);d.gzhead.hcrc&&d.pending>c&&(t.adler=_(t.adler,d.pending_buf,d.pending-c,c)),k===0&&(d.status=103)}else d.status=103;if(d.status===103&&(d.gzhead.hcrc?(d.pending+2>d.pending_buf_size&&A(t),d.pending+2<=d.pending_buf_size&&(X(d,255&t.adler),X(d,t.adler>>8&255),t.adler=0,d.status=R)):d.status=R),d.pending!==0){if(A(t),t.avail_out===0)return d.last_flush=-1,s}else if(t.avail_in===0&&M(L)<=M(I)&&L!==b)return tt(t,-5);if(d.status===666&&t.avail_in!==0)return tt(t,-5);if(t.avail_in!==0||d.lookahead!==0||L!==g&&d.status!==666){var N=d.strategy===2?function(S,W){for(var q;;){if(S.lookahead===0&&(st(S),S.lookahead===0)){if(W===g)return e;break}if(S.match_length=0,q=r._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++,q&&(C(S,!1),S.strm.avail_out===0))return e}return S.insert=0,W===b?(C(S,!0),S.strm.avail_out===0?Q:U):S.last_lit&&(C(S,!1),S.strm.avail_out===0)?e:D}(d,L):d.strategy===3?function(S,W){for(var q,G,Y,it,rt=S.window;;){if(S.lookahead<=Z){if(st(S),S.lookahead<=Z&&W===g)return e;if(S.lookahead===0)break}if(S.match_length=0,S.lookahead>=B&&0<S.strstart&&(G=rt[Y=S.strstart-1])===rt[++Y]&&G===rt[++Y]&&G===rt[++Y]){it=S.strstart+Z;do;while(G===rt[++Y]&&G===rt[++Y]&&G===rt[++Y]&&G===rt[++Y]&&G===rt[++Y]&&G===rt[++Y]&&G===rt[++Y]&&G===rt[++Y]&&Y<it);S.match_length=Z-(it-Y),S.match_length>S.lookahead&&(S.match_length=S.lookahead)}if(S.match_length>=B?(q=r._tr_tally(S,1,S.match_length-B),S.lookahead-=S.match_length,S.strstart+=S.match_length,S.match_length=0):(q=r._tr_tally(S,0,S.window[S.strstart]),S.lookahead--,S.strstart++),q&&(C(S,!1),S.strm.avail_out===0))return e}return S.insert=0,W===b?(C(S,!0),S.strm.avail_out===0?Q:U):S.last_lit&&(C(S,!1),S.strm.avail_out===0)?e:D}(d,L):a[d.level].func(d,L);if(N!==Q&&N!==U||(d.status=666),N===e||N===Q)return t.avail_out===0&&(d.last_flush=-1),s;if(N===D&&(L===1?r._tr_align(d):L!==5&&(r._tr_stored_block(d,0,0,!1),L===3&&(J(d.head),d.lookahead===0&&(d.strstart=0,d.block_start=0,d.insert=0))),A(t),t.avail_out===0))return d.last_flush=-1,s}return L!==b?s:d.wrap<=0?1:(d.wrap===2?(X(d,255&t.adler),X(d,t.adler>>8&255),X(d,t.adler>>16&255),X(d,t.adler>>24&255),X(d,255&t.total_in),X(d,t.total_in>>8&255),X(d,t.total_in>>16&255),X(d,t.total_in>>24&255)):($(d,t.adler>>>16),$(d,65535&t.adler)),A(t),0<d.wrap&&(d.wrap=-d.wrap),d.pending!==0?s:1)},p.deflateEnd=function(t){var L;return t&&t.state?(L=t.state.status)!==y&&L!==69&&L!==73&&L!==91&&L!==103&&L!==R&&L!==666?tt(t,f):(t.state=null,L===R?tt(t,-3):s):f},p.deflateSetDictionary=function(t,L){var I,d,c,k,F,N,S,W,q=L.length;if(!t||!t.state||(k=(I=t.state).wrap)===2||k===1&&I.status!==y||I.lookahead)return f;for(k===1&&(t.adler=o(t.adler,L,q,0)),I.wrap=0,q>=I.w_size&&(k===0&&(J(I.head),I.strstart=0,I.block_start=0,I.insert=0),W=new i.Buf8(I.w_size),i.arraySet(W,L,q-I.w_size,I.w_size,0),L=W,q=I.w_size),F=t.avail_in,N=t.next_in,S=t.input,t.avail_in=q,t.next_in=0,t.input=L,st(I);I.lookahead>=B;){for(d=I.strstart,c=I.lookahead-(B-1);I.ins_h=(I.ins_h<<I.hash_shift^I.window[d+B-1])&I.hash_mask,I.prev[d&I.w_mask]=I.head[I.ins_h],I.head[I.ins_h]=d,d++,--c;);I.strstart=d,I.lookahead=B-1,st(I)}return I.strstart+=I.lookahead,I.block_start=I.strstart,I.insert=I.lookahead,I.lookahead=0,I.match_length=I.prev_length=B-1,I.match_available=0,t.next_in=N,t.input=S,t.avail_in=F,I.wrap=k,s},p.deflateInfo="pako deflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./messages":51,"./trees":52}],47:[function(h,z,p){z.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},{}],48:[function(h,z,p){z.exports=function(a,i){var r,o,_,v,g,b,s,f,n,u,l,m,w,E,x,P,O,j,B,Z,V,y,R,e,D;r=a.state,o=a.next_in,e=a.input,_=o+(a.avail_in-5),v=a.next_out,D=a.output,g=v-(i-a.avail_out),b=v+(a.avail_out-257),s=r.dmax,f=r.wsize,n=r.whave,u=r.wnext,l=r.window,m=r.hold,w=r.bits,E=r.lencode,x=r.distcode,P=(1<<r.lenbits)-1,O=(1<<r.distbits)-1;t:do{w<15&&(m+=e[o++]<<w,w+=8,m+=e[o++]<<w,w+=8),j=E[m&P];e:for(;;){if(m>>>=B=j>>>24,w-=B,(B=j>>>16&255)===0)D[v++]=65535&j;else{if(!(16&B)){if(!(64&B)){j=E[(65535&j)+(m&(1<<B)-1)];continue e}if(32&B){r.mode=12;break t}a.msg="invalid literal/length code",r.mode=30;break t}Z=65535&j,(B&=15)&&(w<B&&(m+=e[o++]<<w,w+=8),Z+=m&(1<<B)-1,m>>>=B,w-=B),w<15&&(m+=e[o++]<<w,w+=8,m+=e[o++]<<w,w+=8),j=x[m&O];r:for(;;){if(m>>>=B=j>>>24,w-=B,!(16&(B=j>>>16&255))){if(!(64&B)){j=x[(65535&j)+(m&(1<<B)-1)];continue r}a.msg="invalid distance code",r.mode=30;break t}if(V=65535&j,w<(B&=15)&&(m+=e[o++]<<w,(w+=8)<B&&(m+=e[o++]<<w,w+=8)),s<(V+=m&(1<<B)-1)){a.msg="invalid distance too far back",r.mode=30;break t}if(m>>>=B,w-=B,(B=v-g)<V){if(n<(B=V-B)&&r.sane){a.msg="invalid distance too far back",r.mode=30;break t}if(R=l,(y=0)===u){if(y+=f-B,B<Z){for(Z-=B;D[v++]=l[y++],--B;);y=v-V,R=D}}else if(u<B){if(y+=f+u-B,(B-=u)<Z){for(Z-=B;D[v++]=l[y++],--B;);if(y=0,u<Z){for(Z-=B=u;D[v++]=l[y++],--B;);y=v-V,R=D}}}else if(y+=u-B,B<Z){for(Z-=B;D[v++]=l[y++],--B;);y=v-V,R=D}for(;2<Z;)D[v++]=R[y++],D[v++]=R[y++],D[v++]=R[y++],Z-=3;Z&&(D[v++]=R[y++],1<Z&&(D[v++]=R[y++]))}else{for(y=v-V;D[v++]=D[y++],D[v++]=D[y++],D[v++]=D[y++],2<(Z-=3););Z&&(D[v++]=D[y++],1<Z&&(D[v++]=D[y++]))}break}}break}}while(o<_&&v<b);o-=Z=w>>3,m&=(1<<(w-=Z<<3))-1,a.next_in=o,a.next_out=v,a.avail_in=o<_?_-o+5:5-(o-_),a.avail_out=v<b?b-v+257:257-(v-b),r.hold=m,r.bits=w}},{}],49:[function(h,z,p){var a=h("../utils/common"),i=h("./adler32"),r=h("./crc32"),o=h("./inffast"),_=h("./inftrees"),v=1,g=2,b=0,s=-2,f=1,n=852,u=592;function l(y){return(y>>>24&255)+(y>>>8&65280)+((65280&y)<<8)+((255&y)<<24)}function m(){this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new a.Buf16(320),this.work=new a.Buf16(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}function w(y){var R;return y&&y.state?(R=y.state,y.total_in=y.total_out=R.total=0,y.msg="",R.wrap&&(y.adler=1&R.wrap),R.mode=f,R.last=0,R.havedict=0,R.dmax=32768,R.head=null,R.hold=0,R.bits=0,R.lencode=R.lendyn=new a.Buf32(n),R.distcode=R.distdyn=new a.Buf32(u),R.sane=1,R.back=-1,b):s}function E(y){var R;return y&&y.state?((R=y.state).wsize=0,R.whave=0,R.wnext=0,w(y)):s}function x(y,R){var e,D;return y&&y.state?(D=y.state,R<0?(e=0,R=-R):(e=1+(R>>4),R<48&&(R&=15)),R&&(R<8||15<R)?s:(D.window!==null&&D.wbits!==R&&(D.window=null),D.wrap=e,D.wbits=R,E(y))):s}function P(y,R){var e,D;return y?(D=new m,(y.state=D).window=null,(e=x(y,R))!==b&&(y.state=null),e):s}var O,j,B=!0;function Z(y){if(B){var R;for(O=new a.Buf32(512),j=new a.Buf32(32),R=0;R<144;)y.lens[R++]=8;for(;R<256;)y.lens[R++]=9;for(;R<280;)y.lens[R++]=7;for(;R<288;)y.lens[R++]=8;for(_(v,y.lens,0,288,O,0,y.work,{bits:9}),R=0;R<32;)y.lens[R++]=5;_(g,y.lens,0,32,j,0,y.work,{bits:5}),B=!1}y.lencode=O,y.lenbits=9,y.distcode=j,y.distbits=5}function V(y,R,e,D){var Q,U=y.state;return U.window===null&&(U.wsize=1<<U.wbits,U.wnext=0,U.whave=0,U.window=new a.Buf8(U.wsize)),D>=U.wsize?(a.arraySet(U.window,R,e-U.wsize,U.wsize,0),U.wnext=0,U.whave=U.wsize):(D<(Q=U.wsize-U.wnext)&&(Q=D),a.arraySet(U.window,R,e-D,Q,U.wnext),(D-=Q)?(a.arraySet(U.window,R,e-D,D,0),U.wnext=D,U.whave=U.wsize):(U.wnext+=Q,U.wnext===U.wsize&&(U.wnext=0),U.whave<U.wsize&&(U.whave+=Q))),0}p.inflateReset=E,p.inflateReset2=x,p.inflateResetKeep=w,p.inflateInit=function(y){return P(y,15)},p.inflateInit2=P,p.inflate=function(y,R){var e,D,Q,U,tt,M,J,A,C,X,$,H,st,ut,et,nt,ct,at,gt,mt,t,L,I,d,c=0,k=new a.Buf8(4),F=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15];if(!y||!y.state||!y.output||!y.input&&y.avail_in!==0)return s;(e=y.state).mode===12&&(e.mode=13),tt=y.next_out,Q=y.output,J=y.avail_out,U=y.next_in,D=y.input,M=y.avail_in,A=e.hold,C=e.bits,X=M,$=J,L=b;t:for(;;)switch(e.mode){case f:if(e.wrap===0){e.mode=13;break}for(;C<16;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}if(2&e.wrap&&A===35615){k[e.check=0]=255&A,k[1]=A>>>8&255,e.check=r(e.check,k,2,0),C=A=0,e.mode=2;break}if(e.flags=0,e.head&&(e.head.done=!1),!(1&e.wrap)||(((255&A)<<8)+(A>>8))%31){y.msg="incorrect header check",e.mode=30;break}if((15&A)!=8){y.msg="unknown compression method",e.mode=30;break}if(C-=4,t=8+(15&(A>>>=4)),e.wbits===0)e.wbits=t;else if(t>e.wbits){y.msg="invalid window size",e.mode=30;break}e.dmax=1<<t,y.adler=e.check=1,e.mode=512&A?10:12,C=A=0;break;case 2:for(;C<16;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}if(e.flags=A,(255&e.flags)!=8){y.msg="unknown compression method",e.mode=30;break}if(57344&e.flags){y.msg="unknown header flags set",e.mode=30;break}e.head&&(e.head.text=A>>8&1),512&e.flags&&(k[0]=255&A,k[1]=A>>>8&255,e.check=r(e.check,k,2,0)),C=A=0,e.mode=3;case 3:for(;C<32;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}e.head&&(e.head.time=A),512&e.flags&&(k[0]=255&A,k[1]=A>>>8&255,k[2]=A>>>16&255,k[3]=A>>>24&255,e.check=r(e.check,k,4,0)),C=A=0,e.mode=4;case 4:for(;C<16;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}e.head&&(e.head.xflags=255&A,e.head.os=A>>8),512&e.flags&&(k[0]=255&A,k[1]=A>>>8&255,e.check=r(e.check,k,2,0)),C=A=0,e.mode=5;case 5:if(1024&e.flags){for(;C<16;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}e.length=A,e.head&&(e.head.extra_len=A),512&e.flags&&(k[0]=255&A,k[1]=A>>>8&255,e.check=r(e.check,k,2,0)),C=A=0}else e.head&&(e.head.extra=null);e.mode=6;case 6:if(1024&e.flags&&(M<(H=e.length)&&(H=M),H&&(e.head&&(t=e.head.extra_len-e.length,e.head.extra||(e.head.extra=new Array(e.head.extra_len)),a.arraySet(e.head.extra,D,U,H,t)),512&e.flags&&(e.check=r(e.check,D,H,U)),M-=H,U+=H,e.length-=H),e.length))break t;e.length=0,e.mode=7;case 7:if(2048&e.flags){if(M===0)break t;for(H=0;t=D[U+H++],e.head&&t&&e.length<65536&&(e.head.name+=String.fromCharCode(t)),t&&H<M;);if(512&e.flags&&(e.check=r(e.check,D,H,U)),M-=H,U+=H,t)break t}else e.head&&(e.head.name=null);e.length=0,e.mode=8;case 8:if(4096&e.flags){if(M===0)break t;for(H=0;t=D[U+H++],e.head&&t&&e.length<65536&&(e.head.comment+=String.fromCharCode(t)),t&&H<M;);if(512&e.flags&&(e.check=r(e.check,D,H,U)),M-=H,U+=H,t)break t}else e.head&&(e.head.comment=null);e.mode=9;case 9:if(512&e.flags){for(;C<16;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}if(A!==(65535&e.check)){y.msg="header crc mismatch",e.mode=30;break}C=A=0}e.head&&(e.head.hcrc=e.flags>>9&1,e.head.done=!0),y.adler=e.check=0,e.mode=12;break;case 10:for(;C<32;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}y.adler=e.check=l(A),C=A=0,e.mode=11;case 11:if(e.havedict===0)return y.next_out=tt,y.avail_out=J,y.next_in=U,y.avail_in=M,e.hold=A,e.bits=C,2;y.adler=e.check=1,e.mode=12;case 12:if(R===5||R===6)break t;case 13:if(e.last){A>>>=7&C,C-=7&C,e.mode=27;break}for(;C<3;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}switch(e.last=1&A,C-=1,3&(A>>>=1)){case 0:e.mode=14;break;case 1:if(Z(e),e.mode=20,R!==6)break;A>>>=2,C-=2;break t;case 2:e.mode=17;break;case 3:y.msg="invalid block type",e.mode=30}A>>>=2,C-=2;break;case 14:for(A>>>=7&C,C-=7&C;C<32;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}if((65535&A)!=(A>>>16^65535)){y.msg="invalid stored block lengths",e.mode=30;break}if(e.length=65535&A,C=A=0,e.mode=15,R===6)break t;case 15:e.mode=16;case 16:if(H=e.length){if(M<H&&(H=M),J<H&&(H=J),H===0)break t;a.arraySet(Q,D,U,H,tt),M-=H,U+=H,J-=H,tt+=H,e.length-=H;break}e.mode=12;break;case 17:for(;C<14;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}if(e.nlen=257+(31&A),A>>>=5,C-=5,e.ndist=1+(31&A),A>>>=5,C-=5,e.ncode=4+(15&A),A>>>=4,C-=4,286<e.nlen||30<e.ndist){y.msg="too many length or distance symbols",e.mode=30;break}e.have=0,e.mode=18;case 18:for(;e.have<e.ncode;){for(;C<3;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}e.lens[F[e.have++]]=7&A,A>>>=3,C-=3}for(;e.have<19;)e.lens[F[e.have++]]=0;if(e.lencode=e.lendyn,e.lenbits=7,I={bits:e.lenbits},L=_(0,e.lens,0,19,e.lencode,0,e.work,I),e.lenbits=I.bits,L){y.msg="invalid code lengths set",e.mode=30;break}e.have=0,e.mode=19;case 19:for(;e.have<e.nlen+e.ndist;){for(;nt=(c=e.lencode[A&(1<<e.lenbits)-1])>>>16&255,ct=65535&c,!((et=c>>>24)<=C);){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}if(ct<16)A>>>=et,C-=et,e.lens[e.have++]=ct;else{if(ct===16){for(d=et+2;C<d;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}if(A>>>=et,C-=et,e.have===0){y.msg="invalid bit length repeat",e.mode=30;break}t=e.lens[e.have-1],H=3+(3&A),A>>>=2,C-=2}else if(ct===17){for(d=et+3;C<d;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}C-=et,t=0,H=3+(7&(A>>>=et)),A>>>=3,C-=3}else{for(d=et+7;C<d;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}C-=et,t=0,H=11+(127&(A>>>=et)),A>>>=7,C-=7}if(e.have+H>e.nlen+e.ndist){y.msg="invalid bit length repeat",e.mode=30;break}for(;H--;)e.lens[e.have++]=t}}if(e.mode===30)break;if(e.lens[256]===0){y.msg="invalid code -- missing end-of-block",e.mode=30;break}if(e.lenbits=9,I={bits:e.lenbits},L=_(v,e.lens,0,e.nlen,e.lencode,0,e.work,I),e.lenbits=I.bits,L){y.msg="invalid literal/lengths set",e.mode=30;break}if(e.distbits=6,e.distcode=e.distdyn,I={bits:e.distbits},L=_(g,e.lens,e.nlen,e.ndist,e.distcode,0,e.work,I),e.distbits=I.bits,L){y.msg="invalid distances set",e.mode=30;break}if(e.mode=20,R===6)break t;case 20:e.mode=21;case 21:if(6<=M&&258<=J){y.next_out=tt,y.avail_out=J,y.next_in=U,y.avail_in=M,e.hold=A,e.bits=C,o(y,$),tt=y.next_out,Q=y.output,J=y.avail_out,U=y.next_in,D=y.input,M=y.avail_in,A=e.hold,C=e.bits,e.mode===12&&(e.back=-1);break}for(e.back=0;nt=(c=e.lencode[A&(1<<e.lenbits)-1])>>>16&255,ct=65535&c,!((et=c>>>24)<=C);){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}if(nt&&!(240&nt)){for(at=et,gt=nt,mt=ct;nt=(c=e.lencode[mt+((A&(1<<at+gt)-1)>>at)])>>>16&255,ct=65535&c,!(at+(et=c>>>24)<=C);){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}A>>>=at,C-=at,e.back+=at}if(A>>>=et,C-=et,e.back+=et,e.length=ct,nt===0){e.mode=26;break}if(32&nt){e.back=-1,e.mode=12;break}if(64&nt){y.msg="invalid literal/length code",e.mode=30;break}e.extra=15&nt,e.mode=22;case 22:if(e.extra){for(d=e.extra;C<d;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}e.length+=A&(1<<e.extra)-1,A>>>=e.extra,C-=e.extra,e.back+=e.extra}e.was=e.length,e.mode=23;case 23:for(;nt=(c=e.distcode[A&(1<<e.distbits)-1])>>>16&255,ct=65535&c,!((et=c>>>24)<=C);){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}if(!(240&nt)){for(at=et,gt=nt,mt=ct;nt=(c=e.distcode[mt+((A&(1<<at+gt)-1)>>at)])>>>16&255,ct=65535&c,!(at+(et=c>>>24)<=C);){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}A>>>=at,C-=at,e.back+=at}if(A>>>=et,C-=et,e.back+=et,64&nt){y.msg="invalid distance code",e.mode=30;break}e.offset=ct,e.extra=15&nt,e.mode=24;case 24:if(e.extra){for(d=e.extra;C<d;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}e.offset+=A&(1<<e.extra)-1,A>>>=e.extra,C-=e.extra,e.back+=e.extra}if(e.offset>e.dmax){y.msg="invalid distance too far back",e.mode=30;break}e.mode=25;case 25:if(J===0)break t;if(H=$-J,e.offset>H){if((H=e.offset-H)>e.whave&&e.sane){y.msg="invalid distance too far back",e.mode=30;break}st=H>e.wnext?(H-=e.wnext,e.wsize-H):e.wnext-H,H>e.length&&(H=e.length),ut=e.window}else ut=Q,st=tt-e.offset,H=e.length;for(J<H&&(H=J),J-=H,e.length-=H;Q[tt++]=ut[st++],--H;);e.length===0&&(e.mode=21);break;case 26:if(J===0)break t;Q[tt++]=e.length,J--,e.mode=21;break;case 27:if(e.wrap){for(;C<32;){if(M===0)break t;M--,A|=D[U++]<<C,C+=8}if($-=J,y.total_out+=$,e.total+=$,$&&(y.adler=e.check=e.flags?r(e.check,Q,$,tt-$):i(e.check,Q,$,tt-$)),$=J,(e.flags?A:l(A))!==e.check){y.msg="incorrect data check",e.mode=30;break}C=A=0}e.mode=28;case 28:if(e.wrap&&e.flags){for(;C<32;){if(M===0)break t;M--,A+=D[U++]<<C,C+=8}if(A!==(4294967295&e.total)){y.msg="incorrect length check",e.mode=30;break}C=A=0}e.mode=29;case 29:L=1;break t;case 30:L=-3;break t;case 31:return-4;case 32:default:return s}return y.next_out=tt,y.avail_out=J,y.next_in=U,y.avail_in=M,e.hold=A,e.bits=C,(e.wsize||$!==y.avail_out&&e.mode<30&&(e.mode<27||R!==4))&&V(y,y.output,y.next_out,$-y.avail_out)?(e.mode=31,-4):(X-=y.avail_in,$-=y.avail_out,y.total_in+=X,y.total_out+=$,e.total+=$,e.wrap&&$&&(y.adler=e.check=e.flags?r(e.check,Q,$,y.next_out-$):i(e.check,Q,$,y.next_out-$)),y.data_type=e.bits+(e.last?64:0)+(e.mode===12?128:0)+(e.mode===20||e.mode===15?256:0),(X==0&&$===0||R===4)&&L===b&&(L=-5),L)},p.inflateEnd=function(y){if(!y||!y.state)return s;var R=y.state;return R.window&&(R.window=null),y.state=null,b},p.inflateGetHeader=function(y,R){var e;return y&&y.state&&2&(e=y.state).wrap?((e.head=R).done=!1,b):s},p.inflateSetDictionary=function(y,R){var e,D=R.length;return y&&y.state?(e=y.state).wrap!==0&&e.mode!==11?s:e.mode===11&&i(1,R,D,0)!==e.check?-3:V(y,R,D,D)?(e.mode=31,-4):(e.havedict=1,b):s},p.inflateInfo="pako inflate (from Nodeca project)"},{"../utils/common":41,"./adler32":43,"./crc32":45,"./inffast":48,"./inftrees":50}],50:[function(h,z,p){var a=h("../utils/common"),i=[3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0],r=[16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78],o=[1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0],_=[16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64];z.exports=function(v,g,b,s,f,n,u,l){var m,w,E,x,P,O,j,B,Z,V=l.bits,y=0,R=0,e=0,D=0,Q=0,U=0,tt=0,M=0,J=0,A=0,C=null,X=0,$=new a.Buf16(16),H=new a.Buf16(16),st=null,ut=0;for(y=0;y<=15;y++)$[y]=0;for(R=0;R<s;R++)$[g[b+R]]++;for(Q=V,D=15;1<=D&&$[D]===0;D--);if(D<Q&&(Q=D),D===0)return f[n++]=20971520,f[n++]=20971520,l.bits=1,0;for(e=1;e<D&&$[e]===0;e++);for(Q<e&&(Q=e),y=M=1;y<=15;y++)if(M<<=1,(M-=$[y])<0)return-1;if(0<M&&(v===0||D!==1))return-1;for(H[1]=0,y=1;y<15;y++)H[y+1]=H[y]+$[y];for(R=0;R<s;R++)g[b+R]!==0&&(u[H[g[b+R]]++]=R);if(O=v===0?(C=st=u,19):v===1?(C=i,X-=257,st=r,ut-=257,256):(C=o,st=_,-1),y=e,P=n,tt=R=A=0,E=-1,x=(J=1<<(U=Q))-1,v===1&&852<J||v===2&&592<J)return 1;for(;;){for(j=y-tt,Z=u[R]<O?(B=0,u[R]):u[R]>O?(B=st[ut+u[R]],C[X+u[R]]):(B=96,0),m=1<<y-tt,e=w=1<<U;f[P+(A>>tt)+(w-=m)]=j<<24|B<<16|Z|0,w!==0;);for(m=1<<y-1;A&m;)m>>=1;if(m!==0?(A&=m-1,A+=m):A=0,R++,--$[y]==0){if(y===D)break;y=g[b+u[R]]}if(Q<y&&(A&x)!==E){for(tt===0&&(tt=Q),P+=e,M=1<<(U=y-tt);U+tt<D&&!((M-=$[U+tt])<=0);)U++,M<<=1;if(J+=1<<U,v===1&&852<J||v===2&&592<J)return 1;f[E=A&x]=Q<<24|U<<16|P-n|0}}return A!==0&&(f[P+A]=y-tt<<24|64<<16|0),l.bits=Q,0}},{"../utils/common":41}],51:[function(h,z,p){z.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},{}],52:[function(h,z,p){var a=h("../utils/common"),i=0,r=1;function o(c){for(var k=c.length;0<=--k;)c[k]=0}var _=0,v=29,g=256,b=g+1+v,s=30,f=19,n=2*b+1,u=15,l=16,m=7,w=256,E=16,x=17,P=18,O=[0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0],j=[0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13],B=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7],Z=[16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15],V=new Array(2*(b+2));o(V);var y=new Array(2*s);o(y);var R=new Array(512);o(R);var e=new Array(256);o(e);var D=new Array(v);o(D);var Q,U,tt,M=new Array(s);function J(c,k,F,N,S){this.static_tree=c,this.extra_bits=k,this.extra_base=F,this.elems=N,this.max_length=S,this.has_stree=c&&c.length}function A(c,k){this.dyn_tree=c,this.max_code=0,this.stat_desc=k}function C(c){return c<256?R[c]:R[256+(c>>>7)]}function X(c,k){c.pending_buf[c.pending++]=255&k,c.pending_buf[c.pending++]=k>>>8&255}function $(c,k,F){c.bi_valid>l-F?(c.bi_buf|=k<<c.bi_valid&65535,X(c,c.bi_buf),c.bi_buf=k>>l-c.bi_valid,c.bi_valid+=F-l):(c.bi_buf|=k<<c.bi_valid&65535,c.bi_valid+=F)}function H(c,k,F){$(c,F[2*k],F[2*k+1])}function st(c,k){for(var F=0;F|=1&c,c>>>=1,F<<=1,0<--k;);return F>>>1}function ut(c,k,F){var N,S,W=new Array(u+1),q=0;for(N=1;N<=u;N++)W[N]=q=q+F[N-1]<<1;for(S=0;S<=k;S++){var G=c[2*S+1];G!==0&&(c[2*S]=st(W[G]++,G))}}function et(c){var k;for(k=0;k<b;k++)c.dyn_ltree[2*k]=0;for(k=0;k<s;k++)c.dyn_dtree[2*k]=0;for(k=0;k<f;k++)c.bl_tree[2*k]=0;c.dyn_ltree[2*w]=1,c.opt_len=c.static_len=0,c.last_lit=c.matches=0}function nt(c){8<c.bi_valid?X(c,c.bi_buf):0<c.bi_valid&&(c.pending_buf[c.pending++]=c.bi_buf),c.bi_buf=0,c.bi_valid=0}function ct(c,k,F,N){var S=2*k,W=2*F;return c[S]<c[W]||c[S]===c[W]&&N[k]<=N[F]}function at(c,k,F){for(var N=c.heap[F],S=F<<1;S<=c.heap_len&&(S<c.heap_len&&ct(k,c.heap[S+1],c.heap[S],c.depth)&&S++,!ct(k,N,c.heap[S],c.depth));)c.heap[F]=c.heap[S],F=S,S<<=1;c.heap[F]=N}function gt(c,k,F){var N,S,W,q,G=0;if(c.last_lit!==0)for(;N=c.pending_buf[c.d_buf+2*G]<<8|c.pending_buf[c.d_buf+2*G+1],S=c.pending_buf[c.l_buf+G],G++,N===0?H(c,S,k):(H(c,(W=e[S])+g+1,k),(q=O[W])!==0&&$(c,S-=D[W],q),H(c,W=C(--N),F),(q=j[W])!==0&&$(c,N-=M[W],q)),G<c.last_lit;);H(c,w,k)}function mt(c,k){var F,N,S,W=k.dyn_tree,q=k.stat_desc.static_tree,G=k.stat_desc.has_stree,Y=k.stat_desc.elems,it=-1;for(c.heap_len=0,c.heap_max=n,F=0;F<Y;F++)W[2*F]!==0?(c.heap[++c.heap_len]=it=F,c.depth[F]=0):W[2*F+1]=0;for(;c.heap_len<2;)W[2*(S=c.heap[++c.heap_len]=it<2?++it:0)]=1,c.depth[S]=0,c.opt_len--,G&&(c.static_len-=q[2*S+1]);for(k.max_code=it,F=c.heap_len>>1;1<=F;F--)at(c,W,F);for(S=Y;F=c.heap[1],c.heap[1]=c.heap[c.heap_len--],at(c,W,1),N=c.heap[1],c.heap[--c.heap_max]=F,c.heap[--c.heap_max]=N,W[2*S]=W[2*F]+W[2*N],c.depth[S]=(c.depth[F]>=c.depth[N]?c.depth[F]:c.depth[N])+1,W[2*F+1]=W[2*N+1]=S,c.heap[1]=S++,at(c,W,1),2<=c.heap_len;);c.heap[--c.heap_max]=c.heap[1],function(rt,ft){var Ct,_t,zt,ot,Rt,Zt,bt=ft.dyn_tree,Vt=ft.max_code,be=ft.stat_desc.static_tree,ve=ft.stat_desc.has_stree,we=ft.stat_desc.extra_bits,Jt=ft.stat_desc.extra_base,At=ft.stat_desc.max_length,Tt=0;for(ot=0;ot<=u;ot++)rt.bl_count[ot]=0;for(bt[2*rt.heap[rt.heap_max]+1]=0,Ct=rt.heap_max+1;Ct<n;Ct++)At<(ot=bt[2*bt[2*(_t=rt.heap[Ct])+1]+1]+1)&&(ot=At,Tt++),bt[2*_t+1]=ot,Vt<_t||(rt.bl_count[ot]++,Rt=0,Jt<=_t&&(Rt=we[_t-Jt]),Zt=bt[2*_t],rt.opt_len+=Zt*(ot+Rt),ve&&(rt.static_len+=Zt*(be[2*_t+1]+Rt)));if(Tt!==0){do{for(ot=At-1;rt.bl_count[ot]===0;)ot--;rt.bl_count[ot]--,rt.bl_count[ot+1]+=2,rt.bl_count[At]--,Tt-=2}while(0<Tt);for(ot=At;ot!==0;ot--)for(_t=rt.bl_count[ot];_t!==0;)Vt<(zt=rt.heap[--Ct])||(bt[2*zt+1]!==ot&&(rt.opt_len+=(ot-bt[2*zt+1])*bt[2*zt],bt[2*zt+1]=ot),_t--)}}(c,k),ut(W,it,c.bl_count)}function t(c,k,F){var N,S,W=-1,q=k[1],G=0,Y=7,it=4;for(q===0&&(Y=138,it=3),k[2*(F+1)+1]=65535,N=0;N<=F;N++)S=q,q=k[2*(N+1)+1],++G<Y&&S===q||(G<it?c.bl_tree[2*S]+=G:S!==0?(S!==W&&c.bl_tree[2*S]++,c.bl_tree[2*E]++):G<=10?c.bl_tree[2*x]++:c.bl_tree[2*P]++,W=S,it=(G=0)===q?(Y=138,3):S===q?(Y=6,3):(Y=7,4))}function L(c,k,F){var N,S,W=-1,q=k[1],G=0,Y=7,it=4;for(q===0&&(Y=138,it=3),N=0;N<=F;N++)if(S=q,q=k[2*(N+1)+1],!(++G<Y&&S===q)){if(G<it)for(;H(c,S,c.bl_tree),--G!=0;);else S!==0?(S!==W&&(H(c,S,c.bl_tree),G--),H(c,E,c.bl_tree),$(c,G-3,2)):G<=10?(H(c,x,c.bl_tree),$(c,G-3,3)):(H(c,P,c.bl_tree),$(c,G-11,7));W=S,it=(G=0)===q?(Y=138,3):S===q?(Y=6,3):(Y=7,4)}}o(M);var I=!1;function d(c,k,F,N){$(c,(_<<1)+(N?1:0),3),function(S,W,q,G){nt(S),X(S,q),X(S,~q),a.arraySet(S.pending_buf,S.window,W,q,S.pending),S.pending+=q}(c,k,F)}p._tr_init=function(c){I||(function(){var k,F,N,S,W,q=new Array(u+1);for(S=N=0;S<v-1;S++)for(D[S]=N,k=0;k<1<<O[S];k++)e[N++]=S;for(e[N-1]=S,S=W=0;S<16;S++)for(M[S]=W,k=0;k<1<<j[S];k++)R[W++]=S;for(W>>=7;S<s;S++)for(M[S]=W<<7,k=0;k<1<<j[S]-7;k++)R[256+W++]=S;for(F=0;F<=u;F++)q[F]=0;for(k=0;k<=143;)V[2*k+1]=8,k++,q[8]++;for(;k<=255;)V[2*k+1]=9,k++,q[9]++;for(;k<=279;)V[2*k+1]=7,k++,q[7]++;for(;k<=287;)V[2*k+1]=8,k++,q[8]++;for(ut(V,b+1,q),k=0;k<s;k++)y[2*k+1]=5,y[2*k]=st(k,5);Q=new J(V,O,g+1,b,u),U=new J(y,j,0,s,u),tt=new J(new Array(0),B,0,f,m)}(),I=!0),c.l_desc=new A(c.dyn_ltree,Q),c.d_desc=new A(c.dyn_dtree,U),c.bl_desc=new A(c.bl_tree,tt),c.bi_buf=0,c.bi_valid=0,et(c)},p._tr_stored_block=d,p._tr_flush_block=function(c,k,F,N){var S,W,q=0;0<c.level?(c.strm.data_type===2&&(c.strm.data_type=function(G){var Y,it=4093624447;for(Y=0;Y<=31;Y++,it>>>=1)if(1&it&&G.dyn_ltree[2*Y]!==0)return i;if(G.dyn_ltree[18]!==0||G.dyn_ltree[20]!==0||G.dyn_ltree[26]!==0)return r;for(Y=32;Y<g;Y++)if(G.dyn_ltree[2*Y]!==0)return r;return i}(c)),mt(c,c.l_desc),mt(c,c.d_desc),q=function(G){var Y;for(t(G,G.dyn_ltree,G.l_desc.max_code),t(G,G.dyn_dtree,G.d_desc.max_code),mt(G,G.bl_desc),Y=f-1;3<=Y&&G.bl_tree[2*Z[Y]+1]===0;Y--);return G.opt_len+=3*(Y+1)+5+5+4,Y}(c),S=c.opt_len+3+7>>>3,(W=c.static_len+3+7>>>3)<=S&&(S=W)):S=W=F+5,F+4<=S&&k!==-1?d(c,k,F,N):c.strategy===4||W===S?($(c,2+(N?1:0),3),gt(c,V,y)):($(c,4+(N?1:0),3),function(G,Y,it,rt){var ft;for($(G,Y-257,5),$(G,it-1,5),$(G,rt-4,4),ft=0;ft<rt;ft++)$(G,G.bl_tree[2*Z[ft]+1],3);L(G,G.dyn_ltree,Y-1),L(G,G.dyn_dtree,it-1)}(c,c.l_desc.max_code+1,c.d_desc.max_code+1,q+1),gt(c,c.dyn_ltree,c.dyn_dtree)),et(c),N&&nt(c)},p._tr_tally=function(c,k,F){return c.pending_buf[c.d_buf+2*c.last_lit]=k>>>8&255,c.pending_buf[c.d_buf+2*c.last_lit+1]=255&k,c.pending_buf[c.l_buf+c.last_lit]=255&F,c.last_lit++,k===0?c.dyn_ltree[2*F]++:(c.matches++,k--,c.dyn_ltree[2*(e[F]+g+1)]++,c.dyn_dtree[2*C(k)]++),c.last_lit===c.lit_bufsize-1},p._tr_align=function(c){$(c,2,3),H(c,w,V),function(k){k.bi_valid===16?(X(k,k.bi_buf),k.bi_buf=0,k.bi_valid=0):8<=k.bi_valid&&(k.pending_buf[k.pending++]=255&k.bi_buf,k.bi_buf>>=8,k.bi_valid-=8)}(c)}},{"../utils/common":41}],53:[function(h,z,p){z.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},{}],54:[function(h,z,p){(function(a){(function(i,r){if(!i.setImmediate){var o,_,v,g,b=1,s={},f=!1,n=i.document,u=Object.getPrototypeOf&&Object.getPrototypeOf(i);u=u&&u.setTimeout?u:i,o={}.toString.call(i.process)==="[object process]"?function(E){process.nextTick(function(){m(E)})}:function(){if(i.postMessage&&!i.importScripts){var E=!0,x=i.onmessage;return i.onmessage=function(){E=!1},i.postMessage("","*"),i.onmessage=x,E}}()?(g="setImmediate$"+Math.random()+"$",i.addEventListener?i.addEventListener("message",w,!1):i.attachEvent("onmessage",w),function(E){i.postMessage(g+E,"*")}):i.MessageChannel?((v=new MessageChannel).port1.onmessage=function(E){m(E.data)},function(E){v.port2.postMessage(E)}):n&&"onreadystatechange"in n.createElement("script")?(_=n.documentElement,function(E){var x=n.createElement("script");x.onreadystatechange=function(){m(E),x.onreadystatechange=null,_.removeChild(x),x=null},_.appendChild(x)}):function(E){setTimeout(m,0,E)},u.setImmediate=function(E){typeof E!="function"&&(E=new Function(""+E));for(var x=new Array(arguments.length-1),P=0;P<x.length;P++)x[P]=arguments[P+1];var O={callback:E,args:x};return s[b]=O,o(b),b++},u.clearImmediate=l}function l(E){delete s[E]}function m(E){if(f)setTimeout(m,0,E);else{var x=s[E];if(x){f=!0;try{(function(P){var O=P.callback,j=P.args;switch(j.length){case 0:O();break;case 1:O(j[0]);break;case 2:O(j[0],j[1]);break;case 3:O(j[0],j[1],j[2]);break;default:O.apply(r,j)}})(x)}finally{l(E),f=!1}}}}function w(E){E.source===i&&typeof E.data=="string"&&E.data.indexOf(g)===0&&m(+E.data.slice(g.length))}})(typeof self>"u"?a===void 0?this:a:self)}).call(this,typeof Lt<"u"?Lt:typeof self<"u"?self:typeof window<"u"?window:{})},{}]},{},[10])(10)})})(ie);var xe=ie.exports;const Ee=ke(xe),se="PhotoAppDB",Se=2,yt="photos",wt="groups";let vt,Qt,lt=[],pt=[],ht=-1,It=!1,dt=new Set,Nt=new Set,kt=null,Ot=localStorage.getItem("isAutoFilename")!=="false";const ae=document.getElementById("camera-page"),oe=document.getElementById("gallery-page"),Et=document.getElementById("camera-feed"),Pt=document.getElementById("capture-canvas"),Ce=document.getElementById("capture-btn"),ze=document.getElementById("to-gallery-btn"),Ft=document.getElementById("last-photo-preview"),Ae=document.getElementById("camera-photo-count"),Ie=document.getElementById("current-group-name"),Be=document.getElementById("new-group-btn"),jt=document.getElementById("group-memo-input"),Oe=document.getElementById("to-camera-btn"),Ht=document.getElementById("gallery-grid"),Re=document.getElementById("photo-count"),Te=document.getElementById("settings-btn"),$t=document.getElementById("select-mode-btn"),te=document.getElementById("bulk-action-bar"),Le=document.getElementById("selected-count"),qt=document.getElementById("select-all-btn"),De=document.getElementById("bulk-download-btn"),Pe=document.getElementById("bulk-delete-btn"),Fe=document.getElementById("bulk-move-btn"),Bt=document.getElementById("photo-modal"),le=document.getElementById("modal-image"),Ne=document.getElementById("close-modal-btn"),Ue=document.getElementById("download-btn"),je=document.getElementById("delete-btn"),Me=document.getElementById("move-btn"),ce=document.getElementById("prev-btn"),ue=document.getElementById("next-btn"),Kt=document.getElementById("settings-modal"),We=document.getElementById("close-settings-btn"),de=document.getElementById("auto-filename-toggle"),Ze=document.getElementById("reset-app-btn"),xt=document.getElementById("move-modal"),Ge=document.getElementById("close-move-btn"),ee=document.getElementById("group-list");async function He(){try{await qe(),await Ye(),await Qe(),lt=await ge(),Yt(),dr(),de.checked=Ot,he()}catch(T){console.error("Initialization failed:",T),alert("Failed to initialize app. Please ensure camera permissions are granted.")}}function he(){ae.classList.remove("hidden"),oe.classList.add("hidden"),Et.paused&&Et.play()}async function $e(){ae.classList.add("hidden"),oe.classList.remove("hidden"),await St()}function qe(){return new Promise((T,K)=>{const h=indexedDB.open(se,Se);h.onerror=()=>K(h.error),h.onsuccess=()=>{vt=h.result,T(vt)},h.onupgradeneeded=z=>{const p=z.target.result;p.objectStoreNames.contains(yt)||p.createObjectStore(yt,{keyPath:"id"}),p.objectStoreNames.contains(wt)||p.createObjectStore(wt,{keyPath:"id"})}})}function fe(T,K=""){return new Promise((h,z)=>{const a=vt.transaction([wt],"readwrite").objectStore(wt),i={id:Date.now(),name:T,memo:K,date:new Date().toISOString()},r=a.add(i);r.onsuccess=()=>{pt.push(i),h(i)},r.onerror=()=>z(r.error)})}function pe(T,K){return new Promise((h,z)=>{const a=vt.transaction([wt],"readwrite").objectStore(wt),i=a.get(T);i.onsuccess=()=>{const r=i.result;if(r){r.memo=K,a.put(r);const o=pt.findIndex(_=>_.id===T);o!==-1&&(pt[o].memo=K),h()}else z("Group not found")},i.onerror=()=>z(i.error)})}function Ke(){return new Promise((T,K)=>{const p=vt.transaction([wt],"readonly").objectStore(wt).getAll();p.onsuccess=()=>T(p.result),p.onerror=()=>K(p.error)})}async function Ye(){pt=await Ke(),pt.sort((T,K)=>T.id-K.id),pt.length===0?kt=(await fe("Group 1")).id:kt=pt[pt.length-1].id,me()}function me(){const T=pt.find(K=>K.id===kt);T&&(Ie.textContent=T.name,jt.value=T.memo||"")}async function Xe(){const T=pt.length+1;kt=(await fe(`Group ${T}`)).id,me(),jt.value=""}function Ve(T){return new Promise((K,h)=>{const p=vt.transaction([yt],"readwrite").objectStore(yt),a={id:Date.now(),blob:T,groupId:kt,date:new Date().toISOString()},i=p.add(a);i.onsuccess=()=>K(a),i.onerror=()=>h(i.error)})}function Je(T,K){return new Promise((h,z)=>{const a=vt.transaction([yt],"readwrite").objectStore(yt),i=a.get(T);i.onsuccess=()=>{const r=i.result;r?(r.groupId=K,a.put(r),h()):z("Photo not found")},i.onerror=()=>z(i.error)})}function ge(){return new Promise((T,K)=>{const p=vt.transaction([yt],"readonly").objectStore(yt).getAll();p.onsuccess=()=>T(p.result.reverse()),p.onerror=()=>K(p.error)})}function _e(T){return new Promise((K,h)=>{const a=vt.transaction([yt],"readwrite").objectStore(yt).delete(T);a.onsuccess=()=>K(),a.onerror=()=>h(a.error)})}async function Qe(){try{Qt=await navigator.mediaDevices.getUserMedia({video:{facingMode:"environment",width:{ideal:1920},height:{ideal:1080}},audio:!1}),Et.srcObject=Qt}catch(T){throw console.error("Camera access denied:",T),T}}function tr(){const T=Et.videoWidth,K=Et.videoHeight,h=1080,z=1745,p=h/z;let a,i,r,o;T/K>p?(o=K,r=o*p,a=(T-r)/2,i=0):(r=T,o=r/p,a=0,i=(K-o)/2),Pt.width=h,Pt.height=z,Pt.getContext("2d").drawImage(Et,a,i,r,o,0,0,h,z),Pt.toBlob(async g=>{if(g)try{const b=await Ve(g);lt.unshift(b),Yt();const s=document.querySelector(".inner-circle");s.style.transform="scale(0.8)",setTimeout(()=>s.style.transform="scale(1)",100)}catch(b){console.error("Failed to save photo:",b),alert("Failed to save photo.")}},"image/jpeg",.8)}function Yt(){const T=lt.length;if(Ae.textContent=T,T>0){const K=lt[0];Ft.src=URL.createObjectURL(K.blob),Ft.classList.remove("hidden")}else Ft.src="",Ft.classList.add("hidden")}async function St(){lt=await ge(),Yt(),Ht.innerHTML="";const T=new Map;pt.forEach(z=>T.set(z.id,z));const K={};lt.forEach(z=>{const p=z.groupId||"undefined";K[p]||(K[p]=[]),K[p].push(z)}),Object.keys(K).sort((z,p)=>z==="undefined"?1:p==="undefined"?-1:p-z).forEach(z=>{const p=K[z],a=T.get(Number(z));if(a){const i=document.createElement("div");i.className="gallery-group-header";const r=document.createElement("span");r.textContent=a.name;const o=document.createElement("span");o.className="group-memo-display",o.textContent=a.memo||"Add memo...",o.onclick=()=>{const g=prompt("Edit Memo:",a.memo||"");g!==null&&pe(a.id,g).then(()=>{St(),kt===a.id&&(jt.value=g)})};const _=document.createElement("span");_.style.fontSize="0.7rem",_.style.opacity="0.7",_.textContent=p.length;const v=document.createElement("div");v.style.display="flex",v.style.alignItems="center",v.style.flex="1",v.style.overflow="hidden",v.appendChild(r),v.appendChild(o),i.appendChild(v),i.appendChild(_),i.style.width="100%",i.style.flexBasis="100%",Ht.appendChild(i)}p.forEach(i=>er(i))}),rr()}function er(T,K=!1){const h=document.createElement("div");h.className="gallery-item",h.dataset.id=T.id;const z=document.createElement("div");z.className="selection-indicator",h.appendChild(z);const p=document.createElement("img");p.src=URL.createObjectURL(T.blob),p.loading="lazy",h.appendChild(p),h.onclick=()=>{It?nr(T.id,h):lr(T.id)},K||Ht.appendChild(h)}function rr(){const T=lt.length;Re.textContent=`${T} photo${T!==1?"s":""}`}function Mt(){It=!It,It?(te.classList.remove("hidden"),$t.textContent="Cancel",document.querySelectorAll(".gallery-item").forEach(T=>{T.classList.add("selecting")})):(te.classList.add("hidden"),$t.textContent="Select",dt.clear(),Xt(),document.querySelectorAll(".gallery-item").forEach(T=>{T.classList.remove("selecting","selected")}))}function nr(T,K){dt.has(T)?(dt.delete(T),K.classList.remove("selected")):(dt.add(T),K.classList.add("selected")),Xt()}function Xt(){Le.textContent=`${dt.size} selected`,dt.size===lt.length&&lt.length>0?qt.textContent="Deselect All":qt.textContent="Select All"}function ir(){dt.size===lt.length?(dt.clear(),document.querySelectorAll(".gallery-item").forEach(T=>{T.classList.remove("selected")})):(lt.forEach(T=>dt.add(T.id)),document.querySelectorAll(".gallery-item").forEach(T=>{T.classList.add("selected")})),Xt()}async function sr(){if(dt.size===0)return;const T=lt.filter(n=>dt.has(n.id));let K=null;const h=new Date,z=h.getFullYear(),p=String(h.getMonth()+1).padStart(2,"0"),a=String(h.getDate()).padStart(2,"0"),i=String(h.getHours()).padStart(2,"0"),r=String(h.getMinutes()).padStart(2,"0"),o=String(h.getSeconds()).padStart(2,"0"),_=`${z}${p}${a}_${i}${r}${o}`;if(Ot)K=_;else{const n=prompt("Enter filename:",_);if(n===null)return;K=n.replace(".zip","").replace(".jpg","")}const v=new Ee;let g=1;for(const n of T){const u=`${K}(${g}).jpg`;v.file(u,n.blob),g++}const b=await v.generateAsync({type:"blob"}),s=URL.createObjectURL(b),f=document.createElement("a");f.href=s,f.download=`${K}.zip`,document.body.appendChild(f),f.click(),document.body.removeChild(f),URL.revokeObjectURL(s),alert(`${K}.zip ${T.length}  .`),Mt()}async function ar(){if(dt.size!==0&&confirm(`Delete ${dt.size} photos?`)){for(const T of dt)await _e(T);await St(),Mt()}}function ye(T=null){T?Nt=new Set(T):Nt=new Set(dt),Nt.size!==0&&(ee.innerHTML="",pt.forEach(K=>{const h=document.createElement("div");h.className="group-list-item",h.innerHTML=`<span>${K.name}</span><span style="font-size:0.8rem;color:#aaa">${K.memo||""}</span>`,h.onclick=()=>or(K.id),ee.appendChild(h)}),xt.classList.remove("hidden"))}async function or(T){for(const K of Nt)await Je(K,T);xt.classList.add("hidden"),It&&Mt(),await St()}function lr(T){ht=lt.findIndex(K=>K.id===T),ht!==-1&&(Wt(),Bt.classList.remove("hidden"))}function Wt(){const T=lt[ht];T&&(le.src=URL.createObjectURL(T.blob),Ue.onclick=()=>cr(T),Me.onclick=()=>ye([T.id]),je.onclick=async()=>{confirm("Delete this photo?")&&(await _e(T.id),lt.splice(ht,1),lt.length===0?(Ut(),St()):(ht>=lt.length&&(ht=lt.length-1),Wt(),St()))},ce.style.display=ht>0?"flex":"none",ue.style.display=ht<lt.length-1?"flex":"none")}function re(){ht<lt.length-1&&(ht++,Wt())}function ne(){ht>0&&(ht--,Wt())}function Ut(){Bt.classList.add("hidden"),setTimeout(()=>{le.src="",ht=-1},300)}function cr(T,K=null,h=null){return new Promise(z=>{const p=URL.createObjectURL(T.blob),a=document.createElement("a");a.href=p;let i,r;if(h)i=h,r=`${i}.jpg`;else{const o=new Date,_=o.getFullYear(),v=String(o.getMonth()+1).padStart(2,"0"),g=String(o.getDate()).padStart(2,"0"),b=String(o.getHours()).padStart(2,"0"),s=String(o.getMinutes()).padStart(2,"0"),f=String(o.getSeconds()).padStart(2,"0");if(i=`${_}${v}${g}_${b}${s}${f}`,r=`${i}.jpg`,!Ot){const n=prompt("Enter filename:",r);if(n===null){URL.revokeObjectURL(p),z();return}i=n.replace(".jpg",""),r=`${i}.jpg`}}if(K){let o=1;for(;K.has(r);)r=`${i}(${o}).jpg`,o++;K.add(r)}a.download=r,document.body.appendChild(a),a.click(),document.body.removeChild(a),URL.revokeObjectURL(p),z()})}function Gt(){Kt.classList.toggle("hidden")}function ur(){if(confirm("WARNING: This will delete ALL photos and groups. This action cannot be undone. Are you sure?")){const T=indexedDB.deleteDatabase(se);T.onsuccess=()=>{alert("App reset successfully. Reloading..."),location.reload()},T.onerror=()=>{alert("Failed to reset app.")}}}function dr(){ze.addEventListener("click",$e),Oe.addEventListener("click",he),Ce.addEventListener("click",tr),Be.addEventListener("click",Xe),jt.addEventListener("change",T=>{kt&&pe(kt,T.target.value)}),Ne.addEventListener("click",Ut),Bt.addEventListener("click",T=>{T.target===Bt&&Ut()}),ce.addEventListener("click",T=>{T.stopPropagation(),ne()}),ue.addEventListener("click",T=>{T.stopPropagation(),re()}),document.addEventListener("keydown",T=>{Bt.classList.contains("hidden")||(T.key==="ArrowLeft"&&ne(),T.key==="ArrowRight"&&re(),T.key==="Escape"&&Ut())}),$t.addEventListener("click",Mt),qt.addEventListener("click",ir),De.addEventListener("click",sr),Pe.addEventListener("click",ar),Fe.addEventListener("click",()=>ye()),Te.addEventListener("click",Gt),We.addEventListener("click",Gt),Kt.addEventListener("click",T=>{T.target===Kt&&Gt()}),de.addEventListener("change",T=>{Ot=T.target.checked,localStorage.setItem("isAutoFilename",Ot)}),Ze.addEventListener("click",ur),Ge.addEventListener("click",()=>xt.classList.add("hidden")),xt.addEventListener("click",T=>{T.target===xt&&xt.classList.add("hidden")})}He();
